<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>poetry on hurutoriya</title><link>https://shunyaueta.com/tags/poetry/</link><description>Recent content in poetry on hurutoriya</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Wed, 10 Aug 2022 17:17:29 +0900</lastBuildDate><atom:link href="https://shunyaueta.com/tags/poetry/index.xml" rel="self" type="application/rss+xml"/><item><title>poetry show でパッケージ名に (!) が付与されている意味</title><link>https://shunyaueta.com/posts/2022-08-10-1717/</link><pubDate>Wed, 10 Aug 2022 17:17:29 +0900</pubDate><guid>https://shunyaueta.com/posts/2022-08-10-1717/</guid><description>poetry show は、poetry の設定ファイルの pyproject.tomlに記載された利用可能なパッケージ名を表示してくれる。
例えば、ターミナルで poetry install を行う前に、poetry showを行うと以下のような結果がでる。
そして、grep で上記の結果を表示させてみると
&amp;gt; poetry show | grep aiohttp aiohttp (!) 3.8.1 Async http client/server framework (asyncio) と パッケージ名に (!)が付与されている。
この(!)ってそもそもどんな意味なのか気になったので調べてみました。
Poetry のコードを直接読んでみると、 test_show_basic_with_not_installed_packages_non_decoratedのテストケースが今回の事例にマッチしており、わかりやすかった。 意味としては、「インストールされたパッケージに対する show コマンドを非装飾モードで結果を出力」へのテストだ。 状況としては、cachyとpendulumを poetry add して、 cachyのみを poetry install している。
poetry.package.add_dependency(Factory.create_dependency(&amp;#34;cachy&amp;#34;, &amp;#34;^0.1.0&amp;#34;)) poetry.package.add_dependency(Factory.create_dependency(&amp;#34;pendulum&amp;#34;, &amp;#34;^2.0.0&amp;#34;)) cachy_010 = get_package(&amp;#34;cachy&amp;#34;, &amp;#34;0.1.0&amp;#34;) cachy_010.description = &amp;#34;Cachy package&amp;#34; pendulum_200 = get_package(&amp;#34;pendulum&amp;#34;, &amp;#34;2.0.0&amp;#34;) pendulum_200.description = &amp;#34;Pendulum package&amp;#34; installed.add_package(cachy_010) その後に、poetry show を実行した際に以下のように(!)が期待される出力となっている。
cachy 0.1.0 Cachy package pendulum (!</description></item></channel></rss>