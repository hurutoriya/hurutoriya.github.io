---
title: "Search Engineering Newsletter vol.06"
date: 2022-05-24T23:46:38+09:00
author: Shunya Ueta
lang: ja
cover:
  image: "/posts/2022-01-16/images/1.png"
tags:
  - newsletter
  - search
---

å…­å›ç›®ã®é…ä¿¡ã§ã™ã€‚
ä»Šå›ã®ã‚¤ãƒã‚ªã‚·ã¯ã€DoorDash ã®æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ åˆ·æ–°ã®è¨˜äº‹ã§ã™ã€‚

## Search

[Apache Solr Release Notes](https://solr.apache.org/news.html)

Solr 9.0.0 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚
Elasticsearch ã¨åŒã˜ãã€ Lucene 9 ã® ANN ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã“ã¨ã«ã‚ˆã‚Šã€è¿‘å‚æ¢ç´¢æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚ŒãŸã€‚

[Apache Solr 9.0.0 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸï¼ - KandaSearch](https://kandasearch.com/news/ac714a31-4a94-42fa-9f2f-3c3da4adc323)

ãƒªãƒªãƒ¼ã‚¹æ–‡ã®æ—¥æœ¬èªè¨³ã‚‚å…¬é–‹ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

> Also in 9.0 is a brand new Solr Ref Guide, completely re-organized and built on @antoraproject
> which gives us a dozen features we've wanted like search. Which is probably the one you really wanted too:
> https://solr.apache.org/guide/solr/latest/ > https://twitter.com/childerelda/status/1524854759022379017

Solr 9 ã®ãƒªãƒªãƒ¼ã‚¹ã«ä¼´ã„ã€Apache Solr Reference Guide ã‚‚å†ç·¨æˆã•ã‚Œã¾ã—ãŸã€‚æ¤œç´¢æ©Ÿèƒ½ãŒã‚µã‚¤ãƒˆã«æ­è¼‰ã•ã‚ŒãŸã¨è¨€åŠã•ã‚Œã¦ã„ã‚‹ã®ã§ä¾¿åˆ©ã«ãªã£ãŸã®ã§ã¯?

[On\-device Text\-to\-Image Search with TensorFlow Lite Searcher Library â€” The TensorFlow Blog](https://blog.tensorflow.org/2022/05/on-device-text-to-image-search-with.html)

TensorFlow Lite ã‚’ä½¿ã£ã¦ãƒ‡ãƒã‚¤ã‚¹ä¸Šã§ã®è¨€èªã‚¯ã‚¨ãƒªã‹ã‚‰ç”»åƒæ¤œç´¢ã‚’è¡Œã£ãŸè§£èª¬è¨˜äº‹ã€‚
ãƒ‡ãƒã‚¤ã‚¹ä¸Šã§ã€æ¤œç´¢ã‚¯ã‚¨ãƒªã«å¯¾å¿œã™ã‚‹ç”»åƒã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã‚’ ScaNN(Google ãŒé–‹ç™ºã—ãŸè¿‘ä¼¼è¿‘å‚æ¢ç´¢ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )ã§è¿‘ä¼¼è¿‘å‚ã‚’è¡Œã„ã€Top N æšã®ç”»åƒã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œç´¢ã™ã‚‹ã€‚ã¤ã¾ã‚Šã€ãƒ‡ãƒã‚¤ã‚¹ä¸Šã«ã¯ç”»åƒã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ã¿ä¿æœ‰ã—ã¦ãŠã‚Šã€ç”»åƒè‡ªä½“ã¯ä¾‹ãˆã°ãƒãƒƒãƒˆçµŒç”±ã§è¡¨ç¤ºã•ã›ã‚‹ã“ã¨ã‚‚å¯èƒ½ã€‚
è¨˜äº‹å†…ã§ã¯ã€ç”»åƒã‚’ãƒ‡ãƒã‚¤ã‚¹ã«ä¿å­˜ã—ã¦ã„ã‚‹ã‚ˆã†ãªè¨˜è¿°ã¯ãªã‹ã£ãŸã®ã§ã€ç”»åƒã®åŸ‹ã‚è¾¼ã¿ç©ºé–“ã®ã¿ä¿æŒã—ã¦ã„ã‚‹æ¨¡æ§˜ã€‚
Pixel 6 ã§ã®å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆã§ã¯ã€å„æ¤œç´¢ã‚¯ã‚¨ãƒªã¯ 6m sec ã§å®Œçµã—ã¦ã„ã‚‹ã‚‰ã—ãã™ã¹ã¦ãƒ‡ãƒã‚¤ã‚¹ä¸Šã§å®Œçµã™ã‚‹ã ã‘ã¯ã‚ã‚‹é¬¼ã®é€Ÿã•ã€‚

åˆã‚ã¦çŸ¥ã£ãŸãŒã€[TensorFlow Lite Model Maker](https://www.tensorflow.org/lite/guide/model_maker) ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã“ã¨ã§ã€TensorFlow Lite ã®å­¦ç¿’ã‚’ç°¡ç´ åŒ–ã§ãã‚‹ã‚‰ã—ã„ã€‚

[ãƒ¦ãƒ¼ã‚¶ã®åœ°åŸŸè€ƒæ…®ï¼‹æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹ CTR æ”¹å–„ ã€œ ãƒ¤ãƒ•ãƒ¼æ¤œç´¢ã®å…¥åŠ›è£œåŠ©æ©Ÿèƒ½ã§ã®äº‹ä¾‹ - Yahoo! JAPAN Tech Blog](https://techblog.yahoo.co.jp/entry/2022051130300827/)

é–¢é€£æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰ã®ç²¾åº¦ã‚’åœ°ç†æƒ…å ±ã«ã‚ˆã‚Šãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã—ã¦ã¿ãŸãŠè©±ã€‚
åœ°ç†ã«ä¾å­˜ã—ãŸã‚¯ã‚¨ãƒªã«ãŠã„ã¦æ›–æ˜§æ€§å›é¿ã®ãŸã‚ã«æœ‰åŠ¹ã ãŒã€åœ°ç†æƒ…å ±ã”ã¨ã« QAC ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ã®å¤§å¤‰ãã†ã€‚
å¤§ã¾ã‹ã«åˆ†ã‘ã¦ã‚‚åœ°æ–¹ã”ã¨(é–¢è¥¿ãƒ»é–¢æ±ã¨ã‹?)ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ã®ã ã‚ã†ã‹...?

å®Ÿé¨“çµæœã§ã€CTR ãŒã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã¨ PC ã ã¨çµæœãŒé¡•è‘—ã«åˆ†ã‹ã‚Œã¦ãŠã‚Šã€æ¤œç´¢çµæœã®ä¸Šéƒ¨ã¨ä¸‹éƒ¨ã§ PC ã ã¨ä¸‹éƒ¨ãŒ CTR ãŒä¸‹ãŒã£ã¦ã„ã¦é¢ç™½ã‹ã£ãŸã€‚
è€ƒå¯Ÿã—ã‚ˆã†ã¨ã—ãŸã‘ã©ã“ã“ã¾ã§å·®ç•°ãŒã§ã‚‹ã®ã¯ãªãœã‹æ€ã„ã¤ã‹ãªã‹ã£ãŸ..
ã“ã‚Œã‚‚ Web æ¤œç´¢ãªã‚‰ã§ã¯ã®å–ã‚Šçµ„ã¿ãŒã„ãŒã‚ã‚‹èª²é¡Œã§ã™ã­ã€‚

[OpenSearchCon 2022 Â· OpenSearch](https://opensearch.org/blog/community/2022/05/opensearchcon/)

2022.09.21 ã« OpenSearch(Elasticsearch ã‚’ãƒ™ãƒ¼ã‚¹ã« AWS ä¸»ä½“ã§é–‹ç™ºã—ã¦ã„ã‚‹æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³)ã®ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãŒé–‹å‚¬äºˆå®šã€‚
OpenSearch ã¯è¿‘ä¼¼è¿‘å‚æ¢ç´¢[^opensaerch-knn]ã§ã€ nmslib ã‚„ faiss ã‚’åˆ©ç”¨ã—ã¦ãŠã‚Šæœ¬å…ƒã® Elasticsearch ã¨é•ã†æ–¹å‘æ€§ã«å¤‰åŒ–ã—ã¦ã„ããã†ãªã®ã§ã€ä»Šå¾Œã«æœŸå¾…ã—ã¦ã„ã‚‹ã€‚

[3 Changes to Expand DoorDashâ€™s Product Search Beyond Delivery](https://doordash.engineering/2022/05/10/3-changes-to-expand-doordashs-product-search/)

ãƒ•ãƒ¼ãƒ‰ãƒ‡ãƒªãƒãƒªãƒ¼ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³ã® DoorDash ãŒæ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã§æ©Ÿèƒ½ã‚’åˆ·æ–°ã—ãŸ 3 ã¤ã®ç‚¹ã‚’è§£èª¬ã—ãŸè¨˜äº‹ã€‚
DoorDash ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã¯ã€æ©Ÿæ¢°å­¦ç¿’[^doordash-ml]ã‚„æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ [^doordash-saerch]ãªã©ã€è‡ªåˆ†ã®èˆˆå‘³ã‚ã‚‹åˆ†é‡ã§è‰¯è³ªãªè¨˜äº‹ãŒç›®ç™½æŠ¼ã—ãªã®ã§æ¯å›æ›´æ–°ã‚’æ¥½ã—ã¿ã«ã—ã¦ã„ã¾ã™ã€‚

ã‹ãªã‚Šé¢ç™½ã‹ã£ãŸã®ã§æ·±å €ã‚Šã—ã¦æŠ„è¨³ã—ã¾ã—ãŸã€‚

---

### 3 Changes to Expand DoorDashâ€™s Product Search Beyond Delivery è¦ç‚¹ã¾ã¨ã‚

å½“åˆã¯ãƒ•ãƒ¼ãƒ‰ãƒ‡ãƒªãƒãƒªãƒ¼ã®ã¿ã ã£ãŸãŒ DoorDash ã®æ¤œç´¢æ©Ÿèƒ½ã¯ã€æ–™ç†ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ¤œç´¢ã®ãŸã‚ã«ä½œæˆã•ã‚ŒãŸã€‚
ãƒ“ã‚¸ãƒã‚¹æ‹¡å¤§ã«ä¼´ã„ã€æ–™ç†ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä»¥å¤–ã«ã‚‚ã€ã‚¹ãƒ¼ãƒ‘ãƒ¼ã®é£Ÿæã‚„é›‘è²¨ã€ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ã‚„ãƒšãƒƒãƒˆãƒ•ãƒ¼ãƒ‰ãªã©æ§˜ã€…ãªç¨®é¡ã®è£½å“ã‚’æ¤œç´¢å¯èƒ½ã«ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã€‚

1. ã¾ãšã€ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è¦–ç‚¹ã§ã¯ã€å•†å“ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä»¥å¤–ã«æ¤œç´¢æ©Ÿèƒ½ã‚’æ‹¡å¤§ã™ã‚‹éš›ã«ã€ã‚¹ãƒ¼ãƒ‘ãƒ¼ã®é£Ÿæãªã©ã¯ SKU ã®å˜ä½ã¨ã—ã¦éå¸¸ã«ç²’åº¦ãŒç´°ã‹ãã€é ˜åŸŸãŒæ‹¡å¤§ã™ã‚‹ãŸã³ã«ãã®é ˜åŸŸã«åˆã‚ã›ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
1. ã¾ãŸã€æ–°ã—ã„é ˜åŸŸã«ãƒ“ã‚¸ãƒã‚¹ã‚’æ‹¡å¤§ã™ã‚‹éš›ã«ã¯ã€è†¨å¤§ãªæ•°ã® SKU ã«ãƒ©ãƒ™ãƒ«ä»˜ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€ã‚¹ã‚±ãƒ¼ãƒ«ã•ã›ã‚‹ãŸã‚ã«æ©Ÿæ¢°å­¦ç¿’ãƒ™ãƒ¼ã‚¹ã®æ‰‹æ³•ã§ãƒ©ãƒ™ãƒªãƒ³ã‚°ã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã•ã›ãŸã€‚

ãã‚Œã‚‰ï¼’ã¤ã®èª²é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«æ–°ã—ãæ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚’åˆ·æ–°ã—ã€ Query undestanding, Document Understanding ã«ã‚ˆã£ã¦æ¤œç´¢çµæœã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’æ”¹å–„ã™ã‚‹ã€‚

å…·ä½“çš„ã«ä½•ã‚’ã‚„ã£ãŸã®ã‹?

- Rebuilding search infrastructure for new challenges
  - `active/nextgen indexing`: ã¾ãš DoorDash ã®äº‹æ¥­å½¢æ…‹ã¨ã—ã¦ã€é«˜é€Ÿã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚(`NOTE:`ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä½•ã‹ã‚’ã‚ªãƒ¼ãƒ€ãƒ¼ã™ã‚‹éš›ã«ã€æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒæ›´æ–°ã•ã‚Œã¦ã„ãªã‹ã£ãŸã®ã§ã€æ¤œç´¢çµæœã«ã¯è¡¨ç¤ºã•ã‚Œã¦ã„ãŸã‘ã©å£²ã‚Šåˆ‡ã‚Œã¦ã‚‹ã‚ˆã†ãªä½“é¨“ã¯é¿ã‘ãŸã„ã§ã™ã‚ˆã­)
  - `federated search`: é£Ÿæ–™å“ã€æ–™ç†ã€ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ãªã©è¤‡æ•°é ˜åŸŸã®æ¤œç´¢çµæœã‚’æ··ãœã‚‹
  - `new search storage`: ä¸Šè¨˜ã‚’å¯èƒ½ã«ã™ã‚‹æ¤œç´¢ã‚¤ãƒ³ãƒ•ãƒ©
- Improving query and document understanding
  - `new taxonomies`: Query & Document understanding ã®ãŸã‚ã«ã€æ©Ÿæ¢°å­¦ç¿’ã‚’ç”¨ã„ãŸè£½å“ã®ãƒ©ãƒ™ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã‚’é–‹ç™º
- Learning-to-rank
  - `learning-to-rank & evaluation system`: Rerank ã®ä»•çµ„ã¿ã¨ã€æ¤œç´¢çµæœã®è©•ä¾¡ã‚’å¯èƒ½ã«ã™ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’é–‹ç™ºã€‚(ãƒ¢ãƒ‡ãƒ«ã®è©³ç´°ã¯å¾Œæ—¥ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ãƒãƒ¼ãƒ ãŒãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’æ›¸ã„ã¦ãã‚Œã‚‹ã¨ã®ã“ã¨)

#### Rebuilding search infrastructure for new challenges

##### Implementing active/nextgen indexing

ä»¥å‰ DoorDash ã¯[Building Faster Indexing with Apache Kafka and Elasticsearch \- DoorDash Engineering Blog](https://doordash.engineering/2021/07/14/open-source-search-indexing/) ã®è¨˜äº‹ã§ç´¹ä»‹ã•ã‚ŒãŸã‚ˆã†ã«ã€Apache Kafka ã‚’ä½¿ã£ã¦ Elasticsaerch ã¸ã®ã‚¤ãƒ³ãƒ‡ã‚­ã‚·ãƒ³ã‚°é€Ÿåº¦ã‚’

- åº—èˆ—ã®ã‚«ã‚¿ãƒ­ã‚°å…¨ä½“ã‚’ backfill ã™ã‚‹æ™‚é–“ã‚’ 1 é€±é–“ã‹ã‚‰ 6.5 æ™‚é–“ã«çŸ­ç¸®
- å•†å“ã®ã‚«ã‚¿ãƒ­ã‚°å…¨ä½“ã‚’ backfill ã™ã‚‹æ™‚é–“ã‚’ 2 é€±é–“ã‹ã‚‰ 6.5 æ™‚é–“ã«çŸ­ç¸®
- å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹(re-index)ã®æ™‚é–“ã‚’ 1 é€±é–“ã‹ã‚‰ 2 æ™‚é–“ã«çŸ­ç¸®

ã¨åŠ‡çš„ã«æ”¹å–„ã—ãŸãŒã€ãã“ã‹ã‚‰æ›´ã«ã‚¤ãƒ³ãƒ‡ã‚­ã‚·ãƒ³ã‚°é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ãŸã€‚

å…·ä½“çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨ã—ã¦å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ã‚„ã‚ã¦é€æ¬¡ã‚¤ãƒ³ãƒ‡ã‚­ã‚·ãƒ³ã‚°ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã§ã€å„ªå…ˆåº¦ã®é«˜ã„ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã«åæ˜ ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

##### Building a federated search

æ–™ç†ã€é›‘è²¨ã€é£Ÿå“ãªã©è¤‡æ•°é ˜åŸŸã®æ¤œç´¢çµæœã‚’æ··ãœã‚‹ federated saerch ã‚’å°å…¥ã€‚
`NOTE`: ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ã¯ã€å„é ˜åŸŸã”ã¨ã«æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã®ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã—ã¦ã€ãã‚Œã‚‰ã®æ¤œç´¢çµæœã‚’æ··ãœã‚‹ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚‚é–‹ç™ºã—ãŸæ„Ÿã˜ã§ã™ã€‚

åˆæœŸã¯ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³(æ–™ç†)æ¤œç´¢ã®ã¿ã«å¯¾å¿œã—ãŸæ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã ã£ãŸãŒã€æ–°ã‚·ã‚¹ãƒ†ãƒ ã§ã¯æ°´å¹³ã«å„é ˜åŸŸã®æ¤œç´¢ã‚’è¡Œã„æ··ãœã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€å¯¾å¿œé ˜åŸŸæ‹¡å¤§ã®éš›ã«ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãªã©ã®æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ›ãˆå¯¾å¿œã™ã‚‹å¿…è¦ãŒãªããªã£ãŸã€‚
ã¾ãŸã€æ¤œç´¢ã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãŒæ°´å¹³ã«åˆ†é›¢ã•ã‚ŒãŸã“ã¨ã§ã€å„é ˜åŸŸã«ç‰¹åŒ–ã—ã¦æŸ”è»Ÿã«æ¤œç´¢æ€§èƒ½ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

ã¾ãŸã€ federated saerch ã®å®Ÿç¾ã«ã‚ˆã‚Šä¾‹ãˆã°ä¸€ã¤ã®é ˜åŸŸã®æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ãŒãƒ€ã‚¦ãƒ³ã—ãŸã¨ã—ã¦ã‚‚æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ãŒãƒ€ã‚¦ãƒ³ã™ã‚‹ã“ã¨ã¯é¿ã‘ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã£ãŸã€‚

##### New search storage engine

Elasticsearch ã‚’æ¡ç”¨ã—ã¦ã„ãŸãŒã€æ§˜ã€…ãªèª²é¡ŒãŒè¦‹ãˆã¦ããŸã®ã§æ–°ã—ã„æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã®æ¤œè¨ã‚’é–‹å§‹ã—ãŸã€‚
Apache Lucene ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ãŸã€‚
åˆ©ç‚¹ã¨ã—ã¦ã€é€Ÿåº¦å‘ä¸Šã®ä»–ã«ã‚‚ã€Lucene 9 ã‹ã‚‰ä½¿ç”¨å¯èƒ½ãª è¿‘ä¼¼è¿‘å‚æ¢ç´¢ã‚‚é­…åŠ›çš„ãªç‚¹ã ã£ãŸã€‚

`NOTE`: yelp ã® nrtsaerch [^yelp]ã‚‚ãã†ã ãŒã€æ—¢å­˜ã® Elasticsaerch ã‚„ Solr ãŒãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«ãªã‚‹ã¨è‡ªä½œæ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½œã‚Šå§‹ã‚ã‚‹ã®ã‹ã£ã“ã‚ˆã™ãã‚‹ã€‚

#### Improving query and document understanding

- æ‰‹ä½œæ¥­ã§ã®ãƒ©ãƒ™ãƒªãƒ³ã‚°ã‚’è¡Œã†ã€‚æ‰‹ä½œæ¥­ã¯ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ã¯ãªã„ãŒã€é«˜é€Ÿã«ä»®èª¬ã‚’ç«‹è¨¼ã—ã¦ã€æ•°ç™¾è¦æ¨¡ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹ã€‚
- ãƒ—ãƒ­ã‚»ã‚¹ãŒæ¨™æº–åŒ–ã•ã‚ŒãŸå¾Œã¯ã€ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ãƒ ã‚„å¤–éƒ¨ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨é€£æºã—ã¦ã€æ•°åƒè¦æ¨¡ã®ãƒ©ãƒ™ãƒªãƒ³ã‚°ã‚’è¡Œã†ã€‚
- åé›†ã—ãŸæ•°åƒã®ãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¦ã€ãã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã£ã¦ãƒ©ãƒ™ãƒªãƒ³ã‚°ã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã•ã›ã‚‹ã€‚
- ä¸Šè¨˜ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ã€å®šæœŸçš„ãªå“è³ªç¢ºèªã‚’è¡Œã†ã€‚ãƒ©ãƒ™ãƒªãƒ³ã‚°ã®å“è³ªç¢ºèªã¯ã€ãƒã‚¤ã‚¢ã‚¹ã®æ’é™¤ã‚„ãƒ¢ãƒ‡ãƒ«ã®ç²¾åº¦å‘ä¸Šã«ä¸å¯æ¬ 

##### Using human annotations to create labels

ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆ†æ•£ã‚’æœ€å°åŒ–ã™ã‚‹ãŸã‚ã«ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ–‡æ›¸åŒ–ã—ãŸã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ä½œæˆã¯ã¨ã¦ã‚‚é‡è¦ã§ã‚ã‚‹ã€‚
Google æ¤œç´¢ãŒå…¬é–‹ã—ã¦ã„ã‚‹æ¤œç´¢å“è³ªã®[ç´ æ™´ã‚‰ã—ã„ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](https://static.googleusercontent.com/media/guidelines.raterhub.com/en//searchqualityevaluatorguidelines.pdf)ãŒã‚ã‚‹ãŒã€åŒæ§˜ã« DoorDash ã‚‚ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’ä½œæˆã—ãŸã€‚

ã ãŒã€ã‚‚ã— DoorDash ã®ã™ã¹ã¦ã®å¾“æ¥­å“¡ãŒãƒ•ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã«å‰‡ã£ã¦ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã—ãŸã¨ã—ã¦ã‚‚æ•°åä¸‡è¦æ¨¡ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¹ã‚¯ã‚’çµ‚ã‚ã‚‰ã›ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚
äººé–“ã«ã‚ˆã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã•ã›ã‚‹ãŸã‚ã«ã¯å¤–éƒ¨ã®å°‚é–€ã®ãƒ™ãƒ³ãƒ€ãƒ¼ã«é ¼ã‚‰ã–ã‚‹ã‚’å¾—ãªã„ã€‚
Amazon Mechanical Turk ã‚„ã€Google Cloud AI Labeling Service, Scale.AI, Appen ãªã©å¤šãã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ“ã‚¸ãƒã‚¹ãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã€‚

åŸºæœ¬çš„ã«ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¹ã‚¯ã¯ã€ä¸€äººã®ã‚¢ãƒãƒ†ãƒ¼ã‚¿ãƒ¼ã®åˆ¤æ–­ã‚’ä¿¡é ¼ã™ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚
ãƒã‚¤ã‚¢ã‚¹é™¤å»ã®ãŸã‚ã«ã€ã‚ˆãä½¿ã‚ã‚Œã‚‹æ‰‹æ³•ã¨ã—ã¦ã¯å¤šæ•°æ±ºã‚’å–ã‚Šå…¥ã‚ŒãŸæ‰‹æ³•ãŒã‚ã‚‹ã€‚
é©åˆ‡ãªç²¾åº¦ã®ãƒ¬ãƒ™ãƒ«ã¾ã§å¼•ãä¸Šã’ã‚‹ã« 3-4 äººã€ã‚‚ã—ãã¯ãã‚Œä»¥ä¸Šã®äººæ•°ã§åŒä¸€ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¹ã‚¯ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã€‚
ã¾ãŸã€è‰¯è³ªãªã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã¯ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å“è³ªã‚„é€Ÿåº¦ã®å‘ä¸Šã«ã‚‚å¯„ä¸ã™ã‚‹ã€‚

ãƒ™ãƒ³ãƒ€ãƒ¼ã«ä¾é ¼å¾Œã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒä½œæˆã•ã‚ŒãŸå¾Œã«ã‚‚ã€æˆ‘ã€…ã¯ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«å¯¾ã™ã‚‹ç›£æŸ»ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã€‚
(æ©Ÿæ¢°å­¦ç¿’ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã‚ã‚ã†ã¨)ä»–ã®ã‚·ã‚¹ãƒ†ãƒ ã¨åŒæ§˜ã«ã€å“è³ªä¿è¨¼ã¯é‡è¦ã§ã™ã€‚

`NOTE`: åŒæ„ã—ã‹ç„¡ã„ã€‚æ©Ÿæ¢°å­¦ç¿’ã ã‹ã‚‰ä»•æ–¹ãªã„ã‚ˆã­ã ã¨ã€ãã®å…ˆã«ã¯è¡Œã‘ãªã„ã®ã§`å‡ºæ¥å¾—ã‚‹é™ã‚Š` (å¤šç¨®å¤šæ§˜ãªçŠ¶æ³ãŒã‚ã‚‹ã®ã§ã€ãã‚Œã«å¿œã˜ãŸãƒ™ã‚¹ãƒˆãªè¡Œå‹•ã‚’æŒ‡ã™)ã®å–ã‚Šçµ„ã¿ã§å“è³ªä¿è¨¼ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã€‚

ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¸ç›£æŸ»ã‚’è¡Œã£ãŸéš›ã«ã€é¢ç™½ã„ãƒ†ãƒ¼ãƒãŒè¦‹ã¤ã‹ã£ãŸã€‚

- ã„ãã‚‰ã‹ã®ãƒ™ãƒ³ãƒ€ãƒ¼ã¯ç‰¹å®šã®åœ°åŸŸã®ã‚¢ãƒãƒ†ãƒ¼ã‚¿ãƒ¼ã§æ§‹æˆã•ã‚Œã¦ãŠã‚Šã€æ–‡åŒ–ã®å·®ç•°ã«ã‚ˆã£ã¦èª¤ã£ãŸåˆ¤æ–­ãŒç™ºç”Ÿã—ã¦ã„ãŸ
- ç‰¹å®šã®ãƒ™ãƒ³ãƒ€ãƒ¼ã¯ä»–ã®ãƒ™ãƒ³ãƒ€ãƒ¼ã¨æ¯”ã¹ã¦ã€ã‚¢ãƒãƒ†ãƒ¼ã‚¿ãƒ¼ãŒè¨“ç·´ã•ã‚Œã¦ãŠã‚Šã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³çµæœãŒã¨ã¦ã‚‚è‰¯è³ªã ã£ãŸ
- ä¸€éƒ¨ã®ç¨®é¡ã®ãƒ©ãƒ™ãƒ«ã¯ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«æ›–æ˜§æ€§ãŒå¤šã™ããŸã€‚
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¹ã‚¯ã®è¤‡é›‘ã•ã‚’éå°è©•ä¾¡ã—ãŸå ´åˆã€ãƒ™ãƒ³ãƒ€ãƒ¼ã¯ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¹ã‚¯ã®ç«‹ã¡ä¸Šã’ã¨å‡¦ç†ã«é•·æ™‚é–“å¿…è¦ã¨ã—ãŸã€‚

##### Using natural language processing to enrich query context

ã‚¯ã‚¨ãƒªã«å¯¾ã™ã‚‹å“è©ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã“ã¨ã§ã€ã‚¯ã‚¨ãƒªã®è¨€èªçš„ãªæ§‹é€ ã‚’ç†è§£ãŒã§ãã‚‹ã€‚
ä¾‹ãˆã°ã€ ã€Œred pizzaã€ã¨ã„ã†ã‚¯ã‚¨ãƒªã«å¯¾ã—ã¦ã€ãƒ‘ãƒ¼ã‚¹ã‚’è¡Œã„[JJ NN]ã¨ã„ã†ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã€‚
`JJ`ã¯å½¢å®¹è©ã§ã€`NN` ã¯åè©ã‚’æŒ‡ã—ã¦ã„ã‚‹ã€‚
çµæœã¨ã—ã¦ã€ã“ã®ã‚¯ã‚¨ãƒªã¯å½¢å®¹è©ãŒåè©ã‚’ä¿®é£¾ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ãŒã‚ã‹ã‚‹ã€‚
æ¤œç´¢ã®éš›ã«ã€ã€Œred pizzaã€ã¨ã„ã†å˜èªãŒå®Œå…¨ä¸€è‡´ã§å­˜åœ¨ã—ãªã‹ã£ãŸå ´åˆã€ç·©å’Œã‚’è¡Œã„ã€Œpizzaã€ã®ã¿ã®å˜èªã§æ¤œç´¢ã‚’è¡Œã†ã“ã¨ãŒå¯èƒ½ã«ãªã‚‹ã€‚(ä¸€èˆ¬çš„ã«ã‚¯ã‚¨ãƒªæ‹¡å¼µã¨å‘¼ã°ã‚Œã‚‹æŠ€è¡“)

`NOTE`: ã“ã® POS ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‹ã‚‰ãªã„ã®ã¯ã€ã‚¯ã‚¨ãƒªè‡ªä½“æ­£ã—ã„è‹±èªã§ã¯ãªãèª¤æ¤ã¾ã¿ã‚Œã®è‹±èªãŒãã‚‹ã‹ã‚‰ POS ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦å•äº‹ãªã®ã‹ãªã¨æ€ã£ãŸã‚Šã—ãŸ? å°‚é–€åˆ†é‡ã§ã¯ãªã„ã®ã§ç´ äººçš„ç™ºæƒ³ã ãŒã€å½¢æ…‹ç´ è§£æãŒå¿…è¦ãªãèª¤æ¤ã‚‚ã‚‚ã—ãªã‘ã‚Œã° POS ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã›ãšã¨ã‚‚å“è©ã¯ã™ã¹ã¦æŠŠæ¡ã§ããã†?
ã ãŒã€å¾Œè¿°ã® Spacy ã§

> NLP libraries involve far more than POS tagging

ã¨æ›¸ã„ã¦ã‚ã‚‹ã®ã§ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è‡ªä½“ã¯å¿…è¦ãªã‚¿ã‚¹ã‚¯ãªã‚“ã ã¨ç†è§£ã€‚

POS ã‚¿ã‚®ãƒ³ã‚°è‡ªä½“ã¯ [Spacy](https://spacy.io/) ã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚
POS ã‚¿ã‚®ãƒ³ã‚°ã®ã‚µãƒ¼ãƒ“ãƒ³ã‚°ã ãŒã€æ¤œç´¢æ™‚ã«ã‚ªãƒ³ãƒ©ã‚¤ãƒ³(ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ )ã§ã®ã‚µãƒ¼ãƒ“ãƒ³ã‚°ãŒå¿…è¦ãªã®ã§é€Ÿåº¦å‘ä¸Šã®ãŸã‚ã«ä»¥ä¸‹ã®ã‚ˆã†ãªé¸æŠè‚¢ãŒã‚ã‚‹ã€‚

- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§è¨ˆç®—ã—ãŸã‚¯ã‚¨ãƒªã®å“è©ã®ãƒšã‚¢ã‚’ Redis ãªã©ã®ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒª DB ã«æ ¼ç´ã—ã¦ãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ§‹ç¯‰ã—ã¦æ¨è«–ã‚’è¡Œã‚ãªã„ã‚ˆã†ã«ã—ãŸã€‚(äººæ°—ã®ã‚ã‚‹ã‚¯ã‚¨ãƒªã®ã¿ã«ç„¦ç‚¹ã‚’ã‚ã¦ã€ãƒ†ã‚¤ãƒ«ã‚¯ã‚¨ãƒª(é »åº¦ã®ä½ã„ã‚¯ã‚¨ãƒª)ã¯ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£ãŒçˆ†ç™ºã™ã‚‹ã®ã§ DB ã«ã¯æ ¼ç´ã—ãªã„)
- Spacy ã‚’ä½¿ã‚ãšã« JVM ã§å‹•ã NLP ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒ“ãƒ³ã‚°ã™ã‚‹
- Roblox ã®ã‚ˆã†ã«ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’æ¥µã‚ã‚‹ã“ã¨ã§ã€ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒ¼ãƒ¢ãƒ‡ãƒ«ã§ã‚‚ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ¯æ—¥ 10 å„„è¦æ¨¡ã®æ¨è«–ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨[^roblox]ã‚‚å¯èƒ½

`NOTE`: é¸æŠè‚¢ã¯è‰²ã€…ã¨ã‚ã‚Šã¾ã™ã¨ã„ã„ã¤ã¤ã‚‚ä½•ã‚’æ¡ç”¨ã—ãŸã‹ã¯æ¬¡ã®è¨˜äº‹ã«æœŸå¾…ã—ã¦ã­ã¨æ›¸ã„ã¦ã„ãŸã€‚å€‹äººçš„ã«ã¯ DB ã§ãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ä½¿ã†ã®ãŒåˆæ‰‹ã ã¨ä¸€ç•ªè‰¯ã•ãã†

#### Learning-to-rank

DoorDash ã® ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å¤‰é·

1. Heuristic Ranker (BM25+ åº—èˆ—ã®äººæ°—åº¦)
1. LTR:Pointwise
1. LTR + Personalization

åˆæœŸã® LTR ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã®æ¤œç´¢è©•ä¾¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ç¤¾å†…ã§è­°è«–ã—ã¦æ–¹å‘æ€§ã‚’å›ºã‚ã¦ã„ã£ãŸã€‚
ãƒ“ã‚¸ãƒã‚¹æŒ‡æ¨™ã¨æƒ…å ±æ¤œç´¢æŒ‡æ¨™ã®ï¼’ã¤ã®ã‚«ãƒ†ã‚´ãƒªã®æŒ‡æ¨™ã‚’æŒã¤

- ãƒ“ã‚¸ãƒã‚¹æŒ‡æ¨™: æ¤œç´¢ã®ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡ã€CTRã€first click rank position ãªã©ã¯ North star æŒ‡æ¨™
- æƒ…å ±æ¤œç´¢æŒ‡æ¨™: mean-reciprical rank, nDCG

å®šå¸¸çš„ã«ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ä»•çµ„ã¿ã‚’ä½œæˆã€‚ã‚¢ãƒãƒ†ãƒ¼ã‚¿ãƒ¼ã‚’é…ç½®ã—ã¦ã€é–¢é€£æ€§ã®ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¡Œã„ã€æœ€æ–°ã®ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’å¸¸ã«ä½œæˆã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚

Heuristic Ranker ã‹ã‚‰ pointwise LTR ã«åˆ‡ã‚Šæ›¿ãˆãŸã“ã¨ã§ã€æ¤œç´¢é–¢ä¿‚ã®ã™ã¹ã¦ã®æŒ‡æ¨™ãŒå¤§ããå‘ä¸Šã€‚

ä¸€æ–¹ã§ pointwise LTR ã®å°å…¥ã«ã¯ 6 ãƒ¶æœˆä»¥ä¸ŠãŒè²»ã‚„ã•ã‚ŒãŸã€‚

ãã®å¾Œã€LTR + Personalization ã«ã‚ˆã£ã¦ã€æ›´ã«æŒ‡æ¨™ãŒå‘ä¸Šã€‚
DoorDash ã§ã¯ã€ï¼’ã¤ã®æ˜ç¢ºãªæ¤œç´¢ã®ä½¿ç”¨æ–¹æ³•ãŒå­˜åœ¨ã—ã€

- ãƒ–ãƒ©ãƒ³ãƒ‰æ¤œç´¢: ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®åå‰ã‚’æ¤œç´¢ã™ã‚‹ã€å¼·ã„æ„å›³ã‚’æŒã£ãŸæ¤œç´¢
- éãƒ–ãƒ©ãƒ³ãƒ‰æ¤œç´¢: æ–™ç†ã‚„é£Ÿå“ã‚’ç›®çš„ã«ã—ãŸæ¤œç´¢ã€æ¤œç´¢æ„å›³ã¯å€‹äººçš„ãªæ€è€ƒã«å¼·ãä¾å­˜

LTR + Personalization ã«ã‚ˆã‚‹æ”¹å–„ã§ã¯ã€éãƒ–ãƒ©ãƒ³ãƒ‰æ¤œç´¢ãŒå¤§ããæ”¹å–„ã•ã‚ŒãŸã€‚(ãã—ã¦æ¤œç´¢ãƒœãƒªãƒ¥ãƒ¼ãƒ ã§ã‚‚ã‹ãªã‚Šã®éƒ¨åˆ†ã‚’å ã‚ã‚‹)

---

[Mercari ML&Search Talk \#3 ~MLOps & Platform~ \- YouTube](https://www.youtube.com/watch?v=3fo5YyRqRII)

- [Build ML platform using Open-Source (English)](https://www.youtube.com/watch?v=3fo5YyRqRII&t=555s)
  - ãƒ¡ãƒ«ã‚«ãƒª JP å†…ã®æ©Ÿæ¢°å­¦ç¿’åŸºç›¤ã«ã¤ã„ã¦èªã£ã¦ãã‚Œã¦ã„ã¾ã™ã€‚ç©æ¥µçš„ã«å¤–éƒ¨ç™ºä¿¡ã•ã‚Œã¦ã„ãªã‹ã£ãŸã¨æ€ã†ã®ã§æ°—ã«ãªã‚‹æ–¹ã¯å¾¡è¦§ãã ã•ã„ã€‚
- [How search system evolves in mercari (Japanese)](https://youtu.be/3fo5YyRqRII?t=2308)
  - [ãƒ¡ãƒ«ã‚«ãƒªã®æ¤œç´¢åŸºç›¤ã®å¤‰é·ã«ã¤ã„ã¦ \| ãƒ¡ãƒ«ã‚«ãƒªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°](https://engineering.mercari.com/blog/entry/20220207-776318b784/)ã‚’åŸºã«ã—ãŸè¬›æ¼”ã«ãªã£ã¦ãŠã‚Šã€ã“ã®è¨˜äº‹ãŒé¢ç™½ã„ã¨æ€ã£ãŸäººã¯ãœã²è¦‹ã¾ã—ã‚‡ã†!
    è‘—è€…ã® @shinpei ã•ã‚“ã¯ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’èªã‚‹ã®ãŒä¸Šæ‰‹ã„ã®ã§ã€è‡ªåˆ†ã¯è¨˜äº‹ã‚’èª­ã‚“ã§ã„ã‚‹æœ€ä¸­ã« 2 å›ç¬‘ã‚ã›ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚
- [Mercari Lens beta - product development with WebAssembly Ã— AI (Japanese)](https://youtu.be/3fo5YyRqRII)
  - @tkat0 ã•ã‚“ã«ã‚ˆã‚‹ã€WebAssembly ã‚’ä½¿ã£ãŸæ©Ÿæ¢°å­¦ç¿’ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºã®è£å´ã®ç´¹ä»‹ã€‚æ¯å›æ„Ÿå˜†ã™ã‚‹ã®ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå‘¨ã‚Šã®é–‹ç™ºã‚’è‡ªåˆ†ãŸã¡ã§ã‚„ã£ã¦ã„ã‚‹ãŸã‚ãŠå®¢ã•ã¾ã®ä½“é¨“ã«ç›´é¢ã™ã‚‹é–‹ç™ºã«ãªã‚‹ã€‚ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚’é‡ã­ã¤ã¤æ”¹å–„ã—ã¦ã„ãã®ã¯ã™ã”ãé›£ã—ã„ã¨æ€ã†ã‘ã©ã€ãã®å§¿å‹¢ãŒè‰¯ã„ãªãã¨æ€ã£ã¦ã„ã‚‹ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã ã‘ã«ãªã‚ŠãŒã¡ãªæ©Ÿæ¢°å­¦ç¿’é©ç”¨ã§ã™ãŒã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¦ç´ ã‚‚è€ƒæ…®ã—ãªã„ã¨ã„ã‘ãªããªã‚‹ã®ã§ã€Edge ã®é†é†å‘³ã§ã™ã­ã€‚

[æ–°åˆŠã€æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ  â€• å®Ÿå‹™è€…ã®ãŸã‚ã®é–‹ç™ºæ”¹å–„ã‚¬ã‚¤ãƒ‰ãƒ–ãƒƒã‚¯ã€ã®ãŠçŸ¥ã‚‰ã› â€“ æŠ€è¡“æ›¸å‡ºç‰ˆã¨è²©å£²ã®ãƒ©ãƒ ãƒ€ãƒãƒ¼ãƒˆ](https://www.lambdanote.com/blogs/news/ir-system)

> æœ¬æ›¸ã¯ã€æ¢ç´¢çš„æ¤œç´¢ã¾ã§è€ƒæ…®ã—ãªãŒã‚‰ã€Œæ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã€ã¨æ—¥ã€…æ ¼é—˜ã—ã¦ã„ã‚‹å®Ÿå‹™å®¶ 6 åã«ã‚ˆã‚‹å®Ÿå‹™å®¶ã®ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ãƒ–ãƒƒã‚¯ã§ã™ã€‚æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã‚’æ”¯ãˆã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ä½¿ã„å‹æ‰‹ã®ã‚ˆã„ UIã€æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã‚’å®šé‡çš„ã«è©•ä¾¡ã—ã¤ã¤æ”¹å–„ã™ã‚‹æ‰‹æ³•ã€å€‹ã€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‹ãƒ¼ã‚ºã«å¯„ã‚Šæ·»ã£ãŸæ¤œç´¢çµæœã‚’è¿”ã™ãŸã‚ã®å·¥å¤«ãªã©ãªã©ã€ã€Œã‚ˆã„æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã‚’ã¤ãã‚‹ã€ãŸã‚ã«ä½•ã‚’ã©ã®ã‚ˆã†ã«å§‹ã‚ãŸã‚‰ã„ã„ã®ã‹ã‚’ä¼ãˆã‚‹ç¾…é‡ç›¤ã¨ãªã£ã¦ã„ã¾ã™ã€‚

[mocobeta/building\-search\-system\-book: ã€Œä»•äº‹ã§ã¯ã˜ã‚ã‚‹æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã€ã¨ã„ã†æœ¬ãŒã‚ã£ãŸãªã‚‰ï¼Œã¨ã„ã†æƒ³åƒã®ç”£ç‰©ã§ã™ \-> ã€Œæ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ  â€• å®Ÿå‹™è€…ã®ãŸã‚ã®é–‹ç™ºæ”¹å–„ã‚¬ã‚¤ãƒ‰ãƒ–ãƒƒã‚¯ã€ã«ãªã‚Šã¾ã—ãŸ](https://github.com/mocobeta/building-search-system-book) 1 å¹´åŠå‰ã®æ§‹æƒ³ã‹ã‚‰ã€ã¤ã„ã«æ›¸ç±ã«ãªã£ãŸã¨ã„ã†è‰¯ã„ãŠè©±ã€‚
ã“ã®è©±é¡ŒãŒ Twitter ã§è©±é¡Œã«ãªã£ãŸéš›ã«ã€ãƒªãƒã‚¸ãƒˆãƒªã®å­˜åœ¨ã¯çŸ¥ã£ãŸã®ã§ã™ãŒã€[commit history](https://github.com/mocobeta/building-search-system-book/commits/master) ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ã¡ã‚‡ã“ã¡ã‚‡ã“ @mocobeta ã•ã‚“ãŒæ›´æ–°ã•ã‚Œã¦ã„ãŸã¿ãŸã„ã§ã“ã®å¤‰é·ã‚’ã¿ã‚‹ã®ãŒæ›¸ç±å®Œæˆã¾ã§ã®è¿½ä½“é¨“ã§ãã¦é¢ç™½ã„ã€‚(web æ—¥è¨˜ã¿ãŸã„ã§è‰¯ã„ã§ã™ã‚ˆã­ ğŸ™‚)

ç™ºå£²æ—¥ã«å³è³¼å…¥ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸãŒã€ã¾ã ã˜ã£ãã‚Šã¨èª­ã‚ã¦ã„ãªã„ã®ã§ç²¾èª­å¾Œã«æ„Ÿæƒ³è¨˜äº‹ã‚’æ›¸ã‹ã›ã¦ã„ãŸã ã“ã†ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚

[10X ã®æ¤œç´¢ã‚’ 10x ã—ãŸã„ \- 10X Product Blog](https://product.10x.co.jp/entry/serch-10x)

ãƒãƒƒãƒˆã‚¹ãƒ¼ãƒ‘ãƒ¼ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã‚ã‚‹ Stailer ã®æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã‚’æ”¹å–„ã—ãŸãŠè©±ã€‚
ç¾çŠ¶ã®æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã‚’ç†è§£ã€ãƒ­ã‚°ã‹ã‚‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’ç™ºè¦‹ã—ã¦è§£æ¶ˆã™ã‚‹ã¨ã„ã†ãŠæ‰‹æœ¬ã®ã‚ˆã†ãªã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã§é¢ç™½ã‹ã£ãŸã§ã™ã€‚
å®Ÿéš›ã«é€Ÿåº¦ã‚‚ 10 å€ã€CPU ä½¿ç”¨ç‡ã‚‚ 68%å‰Šæ¸›ã¨ã„ã†ãƒ‡ã‚«ã‚¤æˆæœãŒã§ã¦ã„ã¾ã™ã­ã€‚
ã¾ãŸã€æ—¢å­˜ã®ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã‚‚è¦‹ç›´ã™ã“ã¨ã§è²»ç”¨ã‚‚ 8 å‰²å‰Šæ¸›ã¨ç´ æ™´ã‚‰ã—ã„ã€‚

ã‚ã¨å†’é ­ã®

> ã¨ã“ã‚ã§ã€æ¤œç´¢ã‚¤ãƒ³ãƒ•ãƒ©ã®æ”¹å–„ãŒã§ãã‚‹ã¨ã„ã†ã“ã¨ã¯ã€å…ˆäººãŸã¡ãŒæ¤œç´¢æ©Ÿèƒ½ã‚’ä½œã‚Šã€PMF ã—ã¦ã‚µãƒ¼ãƒ“ã‚¹ãŒåˆ©ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸãŠã‹ã’ã§ã™ã€‚æ„Ÿè¬ã—ã¦æ”¹å–„ã—ã¾ã—ã‚‡ã†ã€‚

ã®è¨€è‘‰ãŒãƒªã‚¹ãƒšã‚¯ãƒˆã«æº€ã¡ã¦ã„ã¦å€‹äººçš„ã«ã¨ã¦ã‚‚å¥½ããªã®ã¨ã€

æœ€å¾Œã®

> æ¤œç´¢é€Ÿåº¦ã®æ”¹å–„ã‚„ã€ã‚¤ãƒ³ãƒ•ãƒ©è² è·å¯¾ç­–ã¯æ¥½ã—ãã€æ”¹å–„ç‚¹ã¯ç„¡ããªã‚‰ãªã„ã®ã§æ°¸é ã«ã§ãã¾ã™ã€‚ã—ã‹ã—ã€ã‚ãŸã—ãŸã¡ã®ç›®çš„ã¯ã€ã‚ˆã„æ¤œç´¢æ©Ÿèƒ½ã‚’ãŠå®¢ã•ã¾ã«æä¾›ã™ã‚‹ã“ã¨ã§ã‚ã‚‹ã“ã¨ã‚’å¿˜ã‚Œã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚

ã‚‚æ¤œç´¢ã‚’é€šã˜ãŸå…ˆã®ä½“é¨“æ”¹å–„ã‚’å¿µé ­ã«ãŠã„ã¦ã„ã¦ç´ æ™´ã‚‰ã—ããªã„ã§ã™ã‹?

è‘—è€…ã® @metalunk ã•ã‚“ã¯ã€ä¸€ç·’ã«å–ã‚Šçµ„ã‚“ã§ãã‚Œã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’å‹Ÿé›†ä¸­ãªã®ã§ã€ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«é¢è«‡å¤§æ­“è¿[^casualtalk]ã¨ã®ã“ã¨ã§ã™ã€‚

## æ„Ÿæƒ³ãªã©

Twitter ã§ [#searchengineeringnewsletter](https://twitter.com/hashtag/searchengineeringnewsletter?f=live) ã®ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã§ã¤ã¶ã‚„ã„ã¦ã„ãŸã ãã‹ã€
[Google ãƒ•ã‚©ãƒ¼ãƒ ](https://forms.gle/xFgMwRJbeqJxNtfe9) ã§ã®æ„Ÿæƒ³æŠ•ç¨¿ã‚’ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚

æŠ•ç¨¿ã®åŠ±ã¿ã«ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚

## Search Engineering Newsletter ã®è³¼èª­æ–¹æ³•

é…ä¿¡è¨˜äº‹ãŒè“„ç©ã•ã‚Œã‚‹ RSS[^newsletterrss] ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚

ã¾ãŸã€ä»Šã¾ã§ã®é…ä¿¡è¨˜äº‹ä¸€è¦§ã‚‚ã“ã¡ã‚‰[^newsletters]ã‹ã‚‰é–²è¦§ã§ãã¾ã™ã€‚

[^casualtalk]: @metalunk ã•ã‚“ã« Twitter ã§å£°ã‚’ã‹ã‘ã‚‹ã¨ã„ã„ã‚‰ã—ã„ã§ã™ https://twitter.com/metalunk
[^opensaerch-knn]: [Approximate search \- OpenSearch documentation](https://opensearch.org/docs/latest/search-plugins/knn/approximate-knn/)
[^doordash-saerch]: [Things Not Strings: Understanding Search Intent with Better Recall](https://doordash.engineering/2020/12/15/understanding-search-intent-with-better-recall/)
[^doordash-ml]: [Machine Learning \- DoorDash Engineering Blog](https://doordash.engineering/category/data-science-and-machine-learning/)
[^yelp]: [Yelp/nrtsearch: A high performance gRPC server on top of Apache Lucene](https://github.com/Yelp/nrtsearch)
[^roblox]: https://blog.roblox.com/2020/05/scaled-bert-serve-1-billion-daily-requests-cpus/ ã€‚çŸ¥ã‚‰ãªã‹ã£ãŸã®ã§å¾Œã‹ã‚‰èª­ã‚€ãƒªã‚¹ãƒˆã«çªã£è¾¼ã‚“ã ã€‚ ã‚²ãƒ¼ãƒ ä¼šç¤¾ã® Roblox ãŒãã‚“ãªã«æ©Ÿæ¢°å­¦ç¿’ã«åŠ›ã‚’å…¥ã‚Œã¦ã„ã‚‹ã¨ã¯çŸ¥ã‚‰ãªã‹ã£ãŸ...ã€‚é¢ç™½ã„
[^newsletterrss]: newsletter RSS: https://shunyaueta.com/tags/newsletter/index.xml
[^newsletters]: newsltter ä¸€è¦§ãƒšãƒ¼ã‚¸: https://shunyaueta.com/tags/newsletter/
