<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OSSのアノテーションツール Label Studio を使って、快適にアノテーションする | 🦅 hurutoriya</title><meta name=keywords content="annotation,machinelearning"><meta name=description content="Google Spread Sheet による即席アノテーションの限界 データ分析で、ラベルがないデータに対して、自分でアノテーション(ラベルを付与)してデータの傾向を素早く掴みたい時がある。 例えば、文章に対してネガティブ・ポジティブなクラスを割り振ったり、画像に対して人が写り込んでいるか否かなどの簡単な分類タスクでは、お手軽に Google Spread Sheet などを使って、500 件のアノテーションはそこまで問題がなく気合でやれる。
実際の流れとしては、GCP を採用している場合、Google BigQuery から SQL でデータを抽出してそのまま Google Sprad Sheet に出力、=image()関数で CDN から画像の URL を参照できたりなどなどかなり便利。 Spread Sheet を共有して複数人でも作業ができるのも魅力的。
だが、文章の特定の部分を選択してタグを付けたかったり、クラス数が二桁など少し複雑なアノテーションタスクを行いたい場合 Google Spread Sheet では、アノテーションの生産性が劇的に落ちる、もしくは不可能になる。あくまで Google Spread Sheet はお手軽にラベリングを行うだけで、ラベリング専用ツールではないので当然の帰着ではある&mldr;
Label Studio とは 今回紹介するLabel Studioは OSS データのラベリング(アノテーション)ツールは、
 画像  画像分類 物体認識 セマンティックセグメンテーション   音声  音声分類 話者分類 感情認識 文字起こし   文章  文書分類 固有表現抽出(NER) 質疑応答 感情分析   時系列データ  時系列分類 時系列分割 イベント認識   マルチモーダル  対話処理 文字認識(OCR) ビデオ・音声の時系列分類    など多種多様なドメインに対してラベリングを行うことができるソフトウェアだ。"><meta name=author content="Shunya Ueta"><link rel=canonical href=https://shunyaueta.com/posts/2022-01-09/><link crossorigin=anonymous href=/assets/css/stylesheet.min.f00f189851525f5dc525fa12dfc10fa3656c6cc16f26285e5f7347522031587e.css integrity="sha256-8A8YmFFSX13FJfoS38EPo2VsbMFvJiheX3NHUiAxWH4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><link rel=icon href=https://shunyaueta.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://shunyaueta.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://shunyaueta.com/favicon-32x32.png><link rel=apple-touch-icon href=https://shunyaueta.com/apple-touch-icon.png><link rel=mask-icon href=https://shunyaueta.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: rgb(29, 30, 32);--entry: rgb(46, 46, 51);--primary: rgb(218, 218, 219);--secondary: rgb(155, 156, 157);--tertiary: rgb(65, 66, 68);--content: rgb(196, 196, 197);--hljs-bg: rgb(46, 46, 51);--code-bg: rgb(55, 56, 62);--border: rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-39994406-11','auto');ga('send','pageview');}</script><meta property="og:title" content="OSSのアノテーションツール Label Studio を使って、快適にアノテーションする"><meta property="og:description" content="Google Spread Sheet による即席アノテーションの限界 データ分析で、ラベルがないデータに対して、自分でアノテーション(ラベルを付与)してデータの傾向を素早く掴みたい時がある。 例えば、文章に対してネガティブ・ポジティブなクラスを割り振ったり、画像に対して人が写り込んでいるか否かなどの簡単な分類タスクでは、お手軽に Google Spread Sheet などを使って、500 件のアノテーションはそこまで問題がなく気合でやれる。
実際の流れとしては、GCP を採用している場合、Google BigQuery から SQL でデータを抽出してそのまま Google Sprad Sheet に出力、=image()関数で CDN から画像の URL を参照できたりなどなどかなり便利。 Spread Sheet を共有して複数人でも作業ができるのも魅力的。
だが、文章の特定の部分を選択してタグを付けたかったり、クラス数が二桁など少し複雑なアノテーションタスクを行いたい場合 Google Spread Sheet では、アノテーションの生産性が劇的に落ちる、もしくは不可能になる。あくまで Google Spread Sheet はお手軽にラベリングを行うだけで、ラベリング専用ツールではないので当然の帰着ではある&mldr;
Label Studio とは 今回紹介するLabel Studioは OSS データのラベリング(アノテーション)ツールは、
 画像  画像分類 物体認識 セマンティックセグメンテーション   音声  音声分類 話者分類 感情認識 文字起こし   文章  文書分類 固有表現抽出(NER) 質疑応答 感情分析   時系列データ  時系列分類 時系列分割 イベント認識   マルチモーダル  対話処理 文字認識(OCR) ビデオ・音声の時系列分類    など多種多様なドメインに対してラベリングを行うことができるソフトウェアだ。"><meta property="og:type" content="article"><meta property="og:url" content="https://shunyaueta.com/posts/2022-01-09/"><meta property="og:image" content="https://shunyaueta.com/posts/2022-01-09/images/3.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-09T23:05:16+09:00"><meta property="article:modified_time" content="2022-07-23T23:28:41+09:00"><meta property="og:site_name" content="Shunya Ueta"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shunyaueta.com/posts/2022-01-09/images/3.png"><meta name=twitter:title content="OSSのアノテーションツール Label Studio を使って、快適にアノテーションする"><meta name=twitter:description content="Google Spread Sheet による即席アノテーションの限界 データ分析で、ラベルがないデータに対して、自分でアノテーション(ラベルを付与)してデータの傾向を素早く掴みたい時がある。 例えば、文章に対してネガティブ・ポジティブなクラスを割り振ったり、画像に対して人が写り込んでいるか否かなどの簡単な分類タスクでは、お手軽に Google Spread Sheet などを使って、500 件のアノテーションはそこまで問題がなく気合でやれる。
実際の流れとしては、GCP を採用している場合、Google BigQuery から SQL でデータを抽出してそのまま Google Sprad Sheet に出力、=image()関数で CDN から画像の URL を参照できたりなどなどかなり便利。 Spread Sheet を共有して複数人でも作業ができるのも魅力的。
だが、文章の特定の部分を選択してタグを付けたかったり、クラス数が二桁など少し複雑なアノテーションタスクを行いたい場合 Google Spread Sheet では、アノテーションの生産性が劇的に落ちる、もしくは不可能になる。あくまで Google Spread Sheet はお手軽にラベリングを行うだけで、ラベリング専用ツールではないので当然の帰着ではある&mldr;
Label Studio とは 今回紹介するLabel Studioは OSS データのラベリング(アノテーション)ツールは、
 画像  画像分類 物体認識 セマンティックセグメンテーション   音声  音声分類 話者分類 感情認識 文字起こし   文章  文書分類 固有表現抽出(NER) 質疑応答 感情分析   時系列データ  時系列分類 時系列分割 イベント認識   マルチモーダル  対話処理 文字認識(OCR) ビデオ・音声の時系列分類    など多種多様なドメインに対してラベリングを行うことができるソフトウェアだ。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"OSSのアノテーションツール Label Studio を使って、快適にアノテーションする","item":"https://shunyaueta.com/posts/2022-01-09/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OSSのアノテーションツール Label Studio を使って、快適にアノテーションする","name":"OSSのアノテーションツール Label Studio を使って、快適にアノテーションする","description":"Google Spread Sheet による即席アノテーションの限界 データ分析で、ラベルがないデータに対して、自分でアノテーション(ラベルを付与)してデータの傾向を素早く掴みたい時がある。 例えば、文章に対してネガティブ・ポジティブなクラスを割り振ったり、画像に対して人が写り込んでいるか否かなどの簡単な分類タスクでは、お手軽に Google Spread Sheet などを使って、500 件のアノテーションはそこまで問題がなく気合でやれる。\n実際の流れとしては、GCP を採用している場合、Google BigQuery から SQL でデータを抽出してそのまま Google Sprad Sheet に出力、=image()関数で CDN から画像の URL を参照できたりなどなどかなり便利。 Spread Sheet を共有して複数人でも作業ができるのも魅力的。\nだが、文章の特定の部分を選択してタグを付けたかったり、クラス数が二桁など少し複雑なアノテーションタスクを行いたい場合 Google Spread Sheet では、アノテーションの生産性が劇的に落ちる、もしくは不可能になる。あくまで Google Spread Sheet はお手軽にラベリングを行うだけで、ラベリング専用ツールではないので当然の帰着ではある\u0026hellip;\nLabel Studio とは 今回紹介するLabel Studioは OSS データのラベリング(アノテーション)ツールは、\n 画像  画像分類 物体認識 セマンティックセグメンテーション   音声  音声分類 話者分類 感情認識 文字起こし   文章  文書分類 固有表現抽出(NER) 質疑応答 感情分析   時系列データ  時系列分類 時系列分割 イベント認識   マルチモーダル  対話処理 文字認識(OCR) ビデオ・音声の時系列分類    など多種多様なドメインに対してラベリングを行うことができるソフトウェアだ。","keywords":["annotation","machinelearning"],"articleBody":"Google Spread Sheet による即席アノテーションの限界 データ分析で、ラベルがないデータに対して、自分でアノテーション(ラベルを付与)してデータの傾向を素早く掴みたい時がある。 例えば、文章に対してネガティブ・ポジティブなクラスを割り振ったり、画像に対して人が写り込んでいるか否かなどの簡単な分類タスクでは、お手軽に Google Spread Sheet などを使って、500 件のアノテーションはそこまで問題がなく気合でやれる。\n実際の流れとしては、GCP を採用している場合、Google BigQuery から SQL でデータを抽出してそのまま Google Sprad Sheet に出力、=image()関数で CDN から画像の URL を参照できたりなどなどかなり便利。 Spread Sheet を共有して複数人でも作業ができるのも魅力的。\nだが、文章の特定の部分を選択してタグを付けたかったり、クラス数が二桁など少し複雑なアノテーションタスクを行いたい場合 Google Spread Sheet では、アノテーションの生産性が劇的に落ちる、もしくは不可能になる。あくまで Google Spread Sheet はお手軽にラベリングを行うだけで、ラベリング専用ツールではないので当然の帰着ではある…\nLabel Studio とは 今回紹介するLabel Studioは OSS データのラベリング(アノテーション)ツールは、\n 画像  画像分類 物体認識 セマンティックセグメンテーション   音声  音声分類 話者分類 感情認識 文字起こし   文章  文書分類 固有表現抽出(NER) 質疑応答 感情分析   時系列データ  時系列分類 時系列分割 イベント認識   マルチモーダル  対話処理 文字認識(OCR) ビデオ・音声の時系列分類    など多種多様なドメインに対してラベリングを行うことができるソフトウェアだ。\nまた、アカウント認証や、キーボードショートカットなどアノテーションの生産性を向上させる基本的な機能が標準で搭載されており、アノテーション効率の向上と管理が期待できる。\n同様に OSS の自然言語タスクに特化したアノテーションツールのdoccano も検討したが、Label Studio は自然言語以外にも画像やランキングなど多種多様なラベリングタスクに対応しているので、後々にアノテーションしたいデータの種類が増えたとしても Label Studio を活用できて便利そうなので、今回は Label Studio を選択した。\n機能として\n アノテーションのインターフェイスは xml のような形式で、GUI で柔軟に作成可能。画像・文章を組み合わせて表示したいときでも容易に表現が可能。 Web アプリとして完結していて、よほど込み入ったことをしたいと思わない限り、Docker か pip でインストールしてコマンド実行するだけで良い。データを準備するだけで、コードを書かなくてよい 実行環境として Cloud Run で実行可能、pip でインストールして実行するだけでも起動可能なのでポータビリティが高い。  が気に入った。\nまた、今は使わないが\n 機械学習モデルを組み込んで、アノテーションの補助が可能な点 AWS, GCP, Azure の CloudStorage と連携が可能 Webhook で連動させて、アノテーションが完了したらジョブを実行  が気になっている。\nLabel Studio の活用方法 以下の画像の URL が格納されている onepiece.csvを使って、各画像に指定のクラスを割り振るデータラベリングを Label Studio を使って実行する。\n1 2 3 4 5  image https://1.bp.blogspot.com/-uxIsaN0S5lQ/X-FcrvAAInI/AAAAAAABdD4/6uw_qNUh9dQrG0aUzIExybt84yTEmXOPwCNcBGAsYHQ/s200/onepiece01_luffy.png https://1.bp.blogspot.com/-rzRcgoXDqEg/YAOTCKoCpPI/AAAAAAABdOI/5Bl3_zhOxm07TUGzW8_83cXMOT9yy1VJwCNcBGAsYHQ/s200/onepiece02_zoro_bandana.png https://1.bp.blogspot.com/-2ut_UQv3iss/X-Fcs_0oAII/AAAAAAABdD8/jrCZTd_xK-Y6CP1KwOtT_LpEpjp-1nvxgCNcBGAsYHQ/s200/onepiece03_nami.png https://1.bp.blogspot.com/-mZpzgXC1Sxk/YAOTCAKwWTI/AAAAAAABdOM/5B4hXli0KLU5N-BySHgjVbhZscKLSE-bQCNcBGAsYHQ/s200/onepiece04_usopp_sogeking.png`   例とする画像の URL はいらすとやさんを参照させていただいております。\n今回はお手軽に Poetry で Label Studio をインストールして、ローカル環境で実行した。\n1 2 3 4 5  # Requires =Python3.6,  poetry add label-studio # Start the server at http://localhost:8080 poetry run label-studio   実際の作業の撮影動画  Label Studio の起動 プロジェクトの作成 データのアップロード アノテーションの実行 アノテーション結果のダウンロード  までの動画を撮影した。\n動画で見ることで、Label Studio の魅力がわかるのではなかろうか。 キーボードショートカットが搭載されていて、実際のアノテーション作業がとても快適に行える点がわかるのではなかろうか。\n 以下に、実際の画面ごとの解説をしておく。\nプロジェクトの作成 poetry run label-studio で Lebel Studio を起動後、右上の Create ボタンからプロジェクトを作成する。プロジェクト = 必要なアノテーションデータの 1 単位と考えれば良い。 上の 3 つのタブ\n Project Name : プロジェクトの概要を入力 Data Import : アノテーション対象のデータをアップロード Labeling Setup : ラベリング方式の設定  アノテーションテンプレート選択 Labeling Setup では、様々なドメインのアノテーションタスクをテンプレートから選択が可能\nラベリングインターフェイス テンプレートを選択後、GUI でタグを自分で選択して編集する。 Code タグを選択すれば、直接インターフェイスを xml ライクに宣言ができる。 各種タグは\nhttps://labelstud.io/tags/\nを参考にすれば、柔軟にアノテーションが組める。Web アプリ上で完結しつつ柔軟にインターフェイスを構築できるのは感動した。\nタグの豆知識  タグで、各種データの説明文を設定可能\n1   value=\"説明文\"/   タグの末尾に / を入れることで閉じタグを省略できる。 以下の 2 つは等価\n1 2   value=\"$title\"/  value=\"$title\"    タグを使えば、判断に困った際のデータに対してコメントを残せる toName 要素で、何に対するコメントなのかを指定する。\n1   name=\"comment\" toName=\"text\" placeholder=\"Enter Comment here...\" maxSubmissions=\"1\" rows=\"3\" editable=\"true\"/   プロジェクト画面 プロジェクト画面では、アップロードされたデータやアノテーションの進捗具合などがひと目で把握できる。 データセットに画像の URL があれば、カラムの属性をimgに変更すれば一覧画面でその画像が表示される。\nアノテーション画面 Mac だと Command + Enter で Submit, 例だと、例えばナミはキーボードで 3 を押せば選択される。これらのキーボードショートカット機能により高速にアノテーションが可能。\nもう少し使い込んだら、また続編を書きたい。 OSS でこのクオリティのアノテーションソフトウェアが公開されるようになっているのは本当に素晴らしい。\n","wordCount":"266","inLanguage":"ja","image":"https://shunyaueta.com/posts/2022-01-09/images/3.png","datePublished":"2022-01-09T23:05:16+09:00","dateModified":"2022-07-23T23:28:41+09:00","author":{"@type":"Person","name":"Shunya Ueta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://shunyaueta.com/posts/2022-01-09/"},"publisher":{"@type":"Organization","name":"🦅 hurutoriya","logo":{"@type":"ImageObject","url":"https://shunyaueta.com/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><header class=header><nav class=nav><div class=logo><a href=https://shunyaueta.com/ accesskey=h title="🦅 hurutoriya (Alt + H)">🦅 hurutoriya</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://shunyaueta.com/archives title=Archive><span>Archive</span></a></li><li><a href=https://shunyaueta.com/about title=About><span>About</span></a></li><li><a href=https://shunyaueta.com/tags/newsletter/ title=Newsletter><span>Newsletter</span></a></li><li><a href=https://shunyaueta.com/index.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>OSSのアノテーションツール Label Studio を使って、快適にアノテーションする</h1><div class=post-meta><span title="2022-01-09 23:05:16 +0900 +0900">January 9, 2022</span>&nbsp;·&nbsp;Shunya Ueta&nbsp;|&nbsp;<a href=https://github.com/hurutoriya/hurutoriya.github.io/tree/source/content/posts/2022-01-09/index.md rel="noopener noreferrer" target=_blank>Edit this post (この記事を編集する)</a></div></header><figure class=entry-cover><img loading=lazy src=https://shunyaueta.com/posts/2022-01-09/images/3.png alt="Label Studio のスクリーンショット"><p>Label Studio のスクリーンショット</p></figure><div class=post-content><h2 id=google-spread-sheet-による即席アノテーションの限界>Google Spread Sheet による即席アノテーションの限界<a hidden class=anchor aria-hidden=true href=#google-spread-sheet-による即席アノテーションの限界>#</a></h2><p>データ分析で、ラベルがないデータに対して、自分でアノテーション(ラベルを付与)してデータの傾向を素早く掴みたい時がある。
例えば、文章に対してネガティブ・ポジティブなクラスを割り振ったり、画像に対して人が写り込んでいるか否かなどの簡単な分類タスクでは、お手軽に Google Spread Sheet などを使って、500 件のアノテーションはそこまで問題がなく気合でやれる。</p><p>実際の流れとしては、GCP を採用している場合、Google BigQuery から SQL でデータを抽出してそのまま Google Sprad Sheet に出力、<code>=image()</code>関数で CDN から画像の URL を参照できたりなどなどかなり便利。
Spread Sheet を共有して複数人でも作業ができるのも魅力的。</p><p>だが、文章の特定の部分を選択してタグを付けたかったり、クラス数が二桁など少し複雑なアノテーションタスクを行いたい場合 Google Spread Sheet では、アノテーションの生産性が劇的に落ちる、もしくは不可能になる。あくまで Google Spread Sheet はお手軽にラベリングを行うだけで、ラベリング専用ツールではないので当然の帰着ではある&mldr;</p><h2 id=label-studio-とは>Label Studio とは<a hidden class=anchor aria-hidden=true href=#label-studio-とは>#</a></h2><p>今回紹介する<a href=https://labelstud.io/>Label Studio</a>は OSS データのラベリング(アノテーション)ツールは、</p><ul><li>画像<ul><li>画像分類</li><li>物体認識</li><li>セマンティックセグメンテーション</li></ul></li><li>音声<ul><li>音声分類</li><li>話者分類</li><li>感情認識</li><li>文字起こし</li></ul></li><li>文章<ul><li>文書分類</li><li>固有表現抽出(NER)</li><li>質疑応答</li><li>感情分析</li></ul></li><li>時系列データ<ul><li>時系列分類</li><li>時系列分割</li><li>イベント認識</li></ul></li><li>マルチモーダル<ul><li>対話処理</li><li>文字認識(OCR)</li><li>ビデオ・音声の時系列分類</li></ul></li></ul><p>など多種多様なドメインに対してラベリングを行うことができるソフトウェアだ。</p><p>また、アカウント認証や、キーボードショートカットなどアノテーションの生産性を向上させる基本的な機能が標準で搭載されており、アノテーション効率の向上と管理が期待できる。</p><p>同様に OSS の自然言語タスクに特化したアノテーションツールの<a href=https://github.com/doccano/doccano>doccano</a> も検討したが、Label Studio は自然言語以外にも画像やランキングなど多種多様なラベリングタスクに対応しているので、後々にアノテーションしたいデータの種類が増えたとしても Label Studio を活用できて便利そうなので、今回は Label Studio を選択した。</p><p>機能として</p><ul><li>アノテーションのインターフェイスは xml のような形式で、GUI で柔軟に作成可能。画像・文章を組み合わせて表示したいときでも容易に表現が可能。</li><li>Web アプリとして完結していて、よほど込み入ったことをしたいと思わない限り、Docker か pip でインストールしてコマンド実行するだけで良い。データを準備するだけで、コードを書かなくてよい</li><li>実行環境として Cloud Run で実行可能、pip でインストールして実行するだけでも起動可能なのでポータビリティが高い。</li></ul><p>が気に入った。</p><p>また、今は使わないが</p><ul><li>機械学習モデルを組み込んで、アノテーションの補助が可能な点</li><li>AWS, GCP, Azure の CloudStorage と連携が可能</li><li>Webhook で連動させて、アノテーションが完了したらジョブを実行</li></ul><p>が気になっている。</p><h2 id=label-studio-の活用方法>Label Studio の活用方法<a hidden class=anchor aria-hidden=true href=#label-studio-の活用方法>#</a></h2><p>以下の画像の URL が格納されている <code>onepiece.csv</code>を使って、各画像に指定のクラスを割り振るデータラベリングを Label Studio を使って実行する。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>image
https://1.bp.blogspot.com/-uxIsaN0S5lQ/X-FcrvAAInI/AAAAAAABdD4/6uw_qNUh9dQrG0aUzIExybt84yTEmXOPwCNcBGAsYHQ/s200/onepiece01_luffy.png
https://1.bp.blogspot.com/-rzRcgoXDqEg/YAOTCKoCpPI/AAAAAAABdOI/5Bl3_zhOxm07TUGzW8_83cXMOT9yy1VJwCNcBGAsYHQ/s200/onepiece02_zoro_bandana.png
https://1.bp.blogspot.com/-2ut_UQv3iss/X-Fcs_0oAII/AAAAAAABdD8/jrCZTd_xK-Y6CP1KwOtT_LpEpjp-1nvxgCNcBGAsYHQ/s200/onepiece03_nami.png
https://1.bp.blogspot.com/-mZpzgXC1Sxk/YAOTCAKwWTI/AAAAAAABdOM/5B4hXli0KLU5N-BySHgjVbhZscKLSE-bQCNcBGAsYHQ/s200/onepiece04_usopp_sogeking.png`
</code></pre></td></tr></table></div></div><p>例とする画像の URL は<a href=https://www.irasutoya.com/>いらすとや</a>さんを参照させていただいております。</p><p>今回はお手軽に Poetry で Label Studio をインストールして、ローカル環境で実行した。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell><span class=c1># Requires &gt;=Python3.6, &lt;3.9</span>
poetry add label-studio

<span class=c1># Start the server at http://localhost:8080</span>
poetry run label-studio
</code></pre></td></tr></table></div></div><h2 id=実際の作業の撮影動画>実際の作業の撮影動画<a hidden class=anchor aria-hidden=true href=#実際の作業の撮影動画>#</a></h2><ol><li>Label Studio の起動</li><li>プロジェクトの作成</li><li>データのアップロード</li><li>アノテーションの実行</li><li>アノテーション結果のダウンロード</li></ol><p>までの動画を撮影した。</p><p>動画で見ることで、Label Studio の魅力がわかるのではなかろうか。
キーボードショートカットが搭載されていて、実際のアノテーション作業がとても快適に行える点がわかるのではなかろうか。</p><iframe width=560 height=315 src=https://www.youtube.com/embed/lIuREkAdDa0 title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>以下に、実際の画面ごとの解説をしておく。</p><h2 id=プロジェクトの作成>プロジェクトの作成<a hidden class=anchor aria-hidden=true href=#プロジェクトの作成>#</a></h2><p><img loading=lazy src=/posts/2022-01-09/images/1.png alt></p><p><code>poetry run label-studio</code> で Lebel Studio を起動後、右上の Create ボタンからプロジェクトを作成する。プロジェクト = 必要なアノテーションデータの 1 単位と考えれば良い。
上の 3 つのタブ</p><ul><li>Project Name : プロジェクトの概要を入力</li><li>Data Import : アノテーション対象のデータをアップロード</li><li>Labeling Setup : ラベリング方式の設定</li></ul><h2 id=アノテーションテンプレート選択>アノテーションテンプレート選択<a hidden class=anchor aria-hidden=true href=#アノテーションテンプレート選択>#</a></h2><p><img loading=lazy src=/posts/2022-01-09/images/2.png alt></p><p>Labeling Setup では、様々なドメインのアノテーションタスクをテンプレートから選択が可能</p><h2 id=ラベリングインターフェイス>ラベリングインターフェイス<a hidden class=anchor aria-hidden=true href=#ラベリングインターフェイス>#</a></h2><p><img loading=lazy src=/posts/2022-01-09/images/3.png alt></p><p>テンプレートを選択後、GUI でタグを自分で選択して編集する。
Code タグを選択すれば、直接インターフェイスを xml ライクに宣言ができる。
各種タグは</p><p><a href=https://labelstud.io/tags/>https://labelstud.io/tags/</a></p><p>を参考にすれば、柔軟にアノテーションが組める。Web アプリ上で完結しつつ柔軟にインターフェイスを構築できるのは感動した。</p><h4 id=タグの豆知識>タグの豆知識<a hidden class=anchor aria-hidden=true href=#タグの豆知識>#</a></h4><p><code>&lt;Header></code> タグで、各種データの説明文を設定可能</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;Header</span> <span class=na>value=</span><span class=s>&#34;説明文&#34;</span><span class=nt>/&gt;</span>
</code></pre></td></tr></table></div></div><p>タグの末尾に <code>/</code> を入れることで閉じタグを省略できる。
以下の 2 つは等価</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;Header</span> <span class=na>value=</span><span class=s>&#34;$title&#34;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;Header</span> <span class=na>value=</span><span class=s>&#34;$title&#34;</span><span class=nt>&gt;&lt;/Header&gt;</span>
</code></pre></td></tr></table></div></div><p><code>&lt;TextArea></code> タグを使えば、判断に困った際のデータに対してコメントを残せる
<code>toName</code> 要素で、何に対するコメントなのかを指定する。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;TextArea</span> <span class=na>name=</span><span class=s>&#34;comment&#34;</span> <span class=na>toName=</span><span class=s>&#34;text&#34;</span> <span class=na>placeholder=</span><span class=s>&#34;Enter Comment here...&#34;</span> <span class=na>maxSubmissions=</span><span class=s>&#34;1&#34;</span> <span class=na>rows=</span><span class=s>&#34;3&#34;</span> <span class=na>editable=</span><span class=s>&#34;true&#34;</span><span class=nt>/&gt;</span>
</code></pre></td></tr></table></div></div><h2 id=プロジェクト画面>プロジェクト画面<a hidden class=anchor aria-hidden=true href=#プロジェクト画面>#</a></h2><p><img loading=lazy src=/posts/2022-01-09/images/4.png alt></p><p>プロジェクト画面では、アップロードされたデータやアノテーションの進捗具合などがひと目で把握できる。
データセットに画像の URL があれば、カラムの属性を<code>img</code>に変更すれば一覧画面でその画像が表示される。</p><h2 id=アノテーション画面>アノテーション画面<a hidden class=anchor aria-hidden=true href=#アノテーション画面>#</a></h2><p><img loading=lazy src=/posts/2022-01-09/images/5.png alt></p><p>Mac だと Command + Enter で Submit, 例だと、例えばナミはキーボードで 3 を押せば選択される。これらのキーボードショートカット機能により高速にアノテーションが可能。</p><p>もう少し使い込んだら、また続編を書きたい。
OSS でこのクオリティのアノテーションソフトウェアが公開されるようになっているのは本当に素晴らしい。</p><h2>See Also</h2><ul><li><a href=/posts/2021-12-26/>Amazon検索ランキングの奥深さ at MLconf SF 2016</a></li><li><a href=/posts/2021-10-09/>クエリ分類(Query Classification) について社内の勉強会で話してきた</a></li><li><a href=/posts/2021-05-29/>2021年05月時点で自分が実践しているMLOpsの情報収集方法</a></li><li><a href=/posts/2021-01-17/>TFXの歴史を振り返りつつ機械学習エンジニアリングを提案する論文「Towards ML Engineering: A Brief History Of TensorFlow Extended (TFX)」</a></li><li><a href=/posts/2020-09-21/>自分なりの機械学習エンジニアスキル構成論</a></li></ul><h2>Support</h2>記事をお読みくださりありがとうございます。このウェブサイトの運営を支援していただける方を募集しています。
もしよろしければ、下のボタンからサポート(投げ銭)していただけると、ブログ執筆、情報発信のモチベーションに繋がります✨
<a href=https://www.buymeacoffee.com/hurutoriya><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&emoji=☕&slug=hurutoriya&button_colour=FFDD00&font_colour=000000&font_family=Inter&outline_colour=000000&coffee_colour=ffffff"></a></div><footer class=post-footer><ul class=post-tags><li><a href=https://shunyaueta.com/tags/annotation/>annotation</a></li><li><a href=https://shunyaueta.com/tags/machinelearning/>machinelearning</a></li></ul><nav class=paginav><a class=prev href=https://shunyaueta.com/posts/2022-01-16/><span class=title>« 前のページ</span><br><span>Search Engineering Newsletter vol.00</span></a>
<a class=next href=https://shunyaueta.com/posts/2022-01-07/><span class=title>次のページ »</span><br><span>2021 年買って愛用しているもの</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=hurutoriya/hurutoriya.github.io data-repo-id="MDEwOlJlcG9zaXRvcnk2MDgyNTY1Nw==" data-category=Comments data-category-id=DIC_kwDOA6AgOc4CAQTX data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-theme=dark data-lang=ja crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2022 <a href=https://shunyaueta.com/>🦅 hurutoriya</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z" /></svg></a><script>let menu=document.getElementById('menu')
if(menu){menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script><script>document.querySelectorAll('pre > code').forEach((codeblock)=>{const container=codeblock.parentNode.parentNode;const copybutton=document.createElement('button');copybutton.classList.add('copy-code');copybutton.innerText='copy';function copyingDone(){copybutton.innerText='copied!';setTimeout(()=>{copybutton.innerText='copy';},2000);}
copybutton.addEventListener('click',(cb)=>{if('clipboard'in navigator){navigator.clipboard.writeText(codeblock.textContent);copyingDone();return;}
const range=document.createRange();range.selectNodeContents(codeblock);const selection=window.getSelection();selection.removeAllRanges();selection.addRange(range);try{document.execCommand('copy');copyingDone();}catch(e){};selection.removeRange(range);});if(container.classList.contains("highlight")){container.appendChild(copybutton);}else if(container.parentNode.firstChild==container){}else if(codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"){codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);}else{codeblock.parentNode.appendChild(copybutton);}});</script></body></html>