<!doctype html><html><head><script data-ad-client=ca-pub-8604812913439531 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Shunya Ueta (a.k.a hurutoriya) personal website"><link rel="shortcut icon" href=https://shunyaueta.com/favicon.ico><link rel=stylesheet href=/css/style.min.css><script data-ad-client=ca-pub-8604812913439531 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><title>pip 実行時に sys.stderr.write(f"ERROR: {exc} ") とエラーが出てpipを実行できないときの対処方法</title></head><body><header id=banner><h2><a href=https://shunyaueta.com/>Software Engineer as Data Scientist</a></h2><nav><ul><li><a href=/ title=posts>posts</a></li><li><a href=/about/ title=about>about</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>pip 実行時に sys.stderr.write(f"ERROR: {exc} ") とエラーが出てpipを実行できないときの対処方法</h1><time>2021-02-08</time></header><p>新しいマシンで<code>pip</code>をセットアップして実行しようとすると</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>&gt;&gt; pip
Traceback <span class=o>(</span>most recent call last<span class=o>)</span>:
  File <span class=s2>&#34;/usr/local/bin/pip&#34;</span>, line 11, in &lt;module&gt;
    load_entry_point<span class=o>(</span><span class=s1>&#39;pip==21.0&#39;</span>, <span class=s1>&#39;console_scripts&#39;</span>, <span class=s1>&#39;pip&#39;</span><span class=o>)()</span>
  File <span class=s2>&#34;/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources/__init__.py&#34;</span>, line 489, in load_entry_point
    <span class=k>return</span> get_distribution<span class=o>(</span>dist<span class=o>)</span>.load_entry_point<span class=o>(</span>group, name<span class=o>)</span>
  File <span class=s2>&#34;/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources/__init__.py&#34;</span>, line 2843, in load_entry_point
    <span class=k>return</span> ep.load<span class=o>()</span>
  File <span class=s2>&#34;/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources/__init__.py&#34;</span>, line 2434, in load
    <span class=k>return</span> self.resolve<span class=o>()</span>
  File <span class=s2>&#34;/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources/__init__.py&#34;</span>, line 2440, in resolve
    <span class=nv>module</span> <span class=o>=</span> __import__<span class=o>(</span>self.module_name, <span class=nv>fromlist</span><span class=o>=[</span><span class=s1>&#39;__name__&#39;</span><span class=o>]</span>, <span class=nv>level</span><span class=o>=</span>0<span class=o>)</span>
  File <span class=s2>&#34;/Library/Python/2.7/site-packages/pip-21.0-py2.7.egg/pip/_internal/cli/main.py&#34;</span>, line <span class=m>60</span>
    sys.stderr.write<span class=o>(</span>f<span class=s2>&#34;ERROR: {exc}&#34;</span><span class=o>)</span>
</code></pre></div><p>というエラーが出た。</p><p>デフォルトのPython の実行ランタイムが2.x 系なのでそれに起因するエラーだった。
pipをPython2系でおそらくインストールしており、pip21に更新後はPython3.6 からの機能であるf-stringが利用され始めたことが起因。</p><h2 id=対処方法>対処方法</h2><p>既存のpipを削除した上で、</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
python3 get-pip.py
</code></pre></div><p>でpipが実行できるようになりエラーが解消された</p><h2 id=appendix>Appendix</h2><ul><li><a href=https://stackoverflow.com/questions/65866417/pip-install-failing-on-python2>pip install failing on python2</a></li></ul></article></main><h3>See Also</h3><ul><li><a href=/posts/2020-12-26/>Apache beam 入門</a></li><li><a href=/posts/2020-09-09/>pandas を使って特定のディレクトリのCSVファイルをすべて連結して一つのCSVファイルを作成</a></li><li><a href=/posts/2020-08-23/>Python の内包表記とジェネレータ式のメモリ使用量比較</a></li><li><a href=/posts/2020-07-25/>How to write the UnitTest with stdin at Pytest</a></li><li><a href=/posts/2020-05-10/>自走プログラマーを読み終えた</a></li></ul><footer id=footer>Copyright © 2013-2021 Shunya Ueta</footer></body></html>