<!doctype html><html lang=ja><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>OSS ã® Google BigQuery UDF `bqutil.fn` ã‚’ä½¿ãˆã° UDF ã®ç‹¬è‡ªå®Ÿè£…ã‚’ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ | Shunya Ueta</title><meta name=title content="OSS ã® Google BigQuery UDF `bqutil.fn` ã‚’ä½¿ãˆã° UDF ã®ç‹¬è‡ªå®Ÿè£…ã‚’ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„"><meta name=description content="TL;DR; UDF ã‚’ç‹¬è‡ªå®Ÿè£…ã™ã‚‹å‰ã«ã€bqutil.fnã‚’çœºã‚ã¦ãŠãã¨è»Šè¼ªã®å†ç™ºæ˜ãŒå›é¿ã§ãã‚‹ã‹ã‚‚
èƒŒæ™¯ SQL ã¯ã€ç‰¹å®šã®å‡¦ç†ã‚’è¡Œã†éš›ã«ãƒ‡ãƒ¼ã‚¿ã®å‹ãŒåŒä¸€ã§ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ãŒã€ã‚‚ã¨ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ç´¹ä»‹ã™ã‚‹ã‚ˆã‚Šã‚‚ã‚‚ã£ã¨ãŠæ‰‹è»½ã«ã‚«ãƒ©ãƒ ã®å‹ã‚’ç¢ºèªã—ãŸã„ã¨ããŒã‚ã‚Šã¾ã›ã‚“ã‹?
ä¾‹ãˆã°ã€å‡ºåŠ›çµæœã‚’è¦‹ãŸã ã‘ã§ã¯ã€12345 ãŒ STRING ãªã®ã‹ INT64 ãªã®ã‹åˆ¤åˆ¥ä¸å¯èƒ½ã§ã™ã‚ˆã­ã€‚(ã‚‚ã—åˆ¤åˆ¥å¯èƒ½ãªæ–¹æ³•çŸ¥ã£ã¦ã„ã‚‹äººã„ãŸã‚‰æ•™ãˆã¦ä¸‹ã•ã„&mldr;)
GCP ã«ã‚ˆã‚‹ OSS UDF ã® bqutil.fn ãªã®ã§ãŠæ‰‹è»½ã« BigQuery ã®çµæœã®å‹ã‚’ç¢ºèªã—ãŸã„æ™‚ã«ãªã«ã‹è‰¯ã„æ–¹æ³•ãŒãªã„ã‹ãªã¨èª¿ã¹ã¦ã„ãŸã‚‰ã€OSS ã§bqutil.fnã¨ã„ã† UDF ãŒ GCP ã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ãŸã€‚
ä¾‹ãˆã°å‹ã®ç¢ºèªã®å ´åˆã€ä»¥ä¸‹ã® ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©é–¢æ•°ï¼ˆUDF) ã¯ã©ã® GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å®Ÿè¡Œã—ã¦ã‚‚å®Ÿè¡Œå¯èƒ½
bqutil.fn.typeof() ã“ã®bqutil.fn ã¯bigquery-utils/udfs/community/ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ UDF ãŒbqutil ã¨ã„ã† GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®fn ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«åŒæœŸã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã©ã® GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® Google BigQuery ã‹ã‚‰å®Ÿè¡Œã—ã¦ã‚‚ bqutil.fn.typeof()ã‚’å®Ÿè¡Œå¯èƒ½ã«ã—ã¦ã„ã‚‹ã‚‰ã—ã„ã€‚ é ­è‰¯ã„
This directory contains community contributed user-defined functions to extend BigQuery for more specialized usage patterns. Each UDF within this directory will be automatically synchronized to the bqutil project within the fn dataset for reference in queries."><meta name=keywords content="bigquery,gcp,"><meta property="og:title" content="OSS ã® Google BigQuery UDF `bqutil.fn` ã‚’ä½¿ãˆã° UDF ã®ç‹¬è‡ªå®Ÿè£…ã‚’ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„"><meta property="og:description" content="TL;DR; UDF ã‚’ç‹¬è‡ªå®Ÿè£…ã™ã‚‹å‰ã«ã€bqutil.fnã‚’çœºã‚ã¦ãŠãã¨è»Šè¼ªã®å†ç™ºæ˜ãŒå›é¿ã§ãã‚‹ã‹ã‚‚
èƒŒæ™¯ SQL ã¯ã€ç‰¹å®šã®å‡¦ç†ã‚’è¡Œã†éš›ã«ãƒ‡ãƒ¼ã‚¿ã®å‹ãŒåŒä¸€ã§ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ãŒã€ã‚‚ã¨ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ç´¹ä»‹ã™ã‚‹ã‚ˆã‚Šã‚‚ã‚‚ã£ã¨ãŠæ‰‹è»½ã«ã‚«ãƒ©ãƒ ã®å‹ã‚’ç¢ºèªã—ãŸã„ã¨ããŒã‚ã‚Šã¾ã›ã‚“ã‹?
ä¾‹ãˆã°ã€å‡ºåŠ›çµæœã‚’è¦‹ãŸã ã‘ã§ã¯ã€12345 ãŒ STRING ãªã®ã‹ INT64 ãªã®ã‹åˆ¤åˆ¥ä¸å¯èƒ½ã§ã™ã‚ˆã­ã€‚(ã‚‚ã—åˆ¤åˆ¥å¯èƒ½ãªæ–¹æ³•çŸ¥ã£ã¦ã„ã‚‹äººã„ãŸã‚‰æ•™ãˆã¦ä¸‹ã•ã„&mldr;)
GCP ã«ã‚ˆã‚‹ OSS UDF ã® bqutil.fn ãªã®ã§ãŠæ‰‹è»½ã« BigQuery ã®çµæœã®å‹ã‚’ç¢ºèªã—ãŸã„æ™‚ã«ãªã«ã‹è‰¯ã„æ–¹æ³•ãŒãªã„ã‹ãªã¨èª¿ã¹ã¦ã„ãŸã‚‰ã€OSS ã§bqutil.fnã¨ã„ã† UDF ãŒ GCP ã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ãŸã€‚
ä¾‹ãˆã°å‹ã®ç¢ºèªã®å ´åˆã€ä»¥ä¸‹ã® ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©é–¢æ•°ï¼ˆUDF) ã¯ã©ã® GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å®Ÿè¡Œã—ã¦ã‚‚å®Ÿè¡Œå¯èƒ½
bqutil.fn.typeof() ã“ã®bqutil.fn ã¯bigquery-utils/udfs/community/ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ UDF ãŒbqutil ã¨ã„ã† GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®fn ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«åŒæœŸã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã©ã® GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® Google BigQuery ã‹ã‚‰å®Ÿè¡Œã—ã¦ã‚‚ bqutil.fn.typeof()ã‚’å®Ÿè¡Œå¯èƒ½ã«ã—ã¦ã„ã‚‹ã‚‰ã—ã„ã€‚ é ­è‰¯ã„
This directory contains community contributed user-defined functions to extend BigQuery for more specialized usage patterns. Each UDF within this directory will be automatically synchronized to the bqutil project within the fn dataset for reference in queries."><meta property="og:type" content="article"><meta property="og:url" content="https://shunyaueta.com/posts/2022-01-20/"><meta property="og:image" content="https://shunyaueta.com/ogp.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-20T00:03:07+09:00"><meta property="article:modified_time" content="2022-01-20T00:03:07+09:00"><meta property="og:site_name" content="Shunya Ueta"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shunyaueta.com/ogp.jpg"><meta name=twitter:title content="OSS ã® Google BigQuery UDF `bqutil.fn` ã‚’ä½¿ãˆã° UDF ã®ç‹¬è‡ªå®Ÿè£…ã‚’ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„"><meta name=twitter:description content="TL;DR; UDF ã‚’ç‹¬è‡ªå®Ÿè£…ã™ã‚‹å‰ã«ã€bqutil.fnã‚’çœºã‚ã¦ãŠãã¨è»Šè¼ªã®å†ç™ºæ˜ãŒå›é¿ã§ãã‚‹ã‹ã‚‚
èƒŒæ™¯ SQL ã¯ã€ç‰¹å®šã®å‡¦ç†ã‚’è¡Œã†éš›ã«ãƒ‡ãƒ¼ã‚¿ã®å‹ãŒåŒä¸€ã§ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ãŒã€ã‚‚ã¨ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ç´¹ä»‹ã™ã‚‹ã‚ˆã‚Šã‚‚ã‚‚ã£ã¨ãŠæ‰‹è»½ã«ã‚«ãƒ©ãƒ ã®å‹ã‚’ç¢ºèªã—ãŸã„ã¨ããŒã‚ã‚Šã¾ã›ã‚“ã‹?
ä¾‹ãˆã°ã€å‡ºåŠ›çµæœã‚’è¦‹ãŸã ã‘ã§ã¯ã€12345 ãŒ STRING ãªã®ã‹ INT64 ãªã®ã‹åˆ¤åˆ¥ä¸å¯èƒ½ã§ã™ã‚ˆã­ã€‚(ã‚‚ã—åˆ¤åˆ¥å¯èƒ½ãªæ–¹æ³•çŸ¥ã£ã¦ã„ã‚‹äººã„ãŸã‚‰æ•™ãˆã¦ä¸‹ã•ã„&mldr;)
GCP ã«ã‚ˆã‚‹ OSS UDF ã® bqutil.fn ãªã®ã§ãŠæ‰‹è»½ã« BigQuery ã®çµæœã®å‹ã‚’ç¢ºèªã—ãŸã„æ™‚ã«ãªã«ã‹è‰¯ã„æ–¹æ³•ãŒãªã„ã‹ãªã¨èª¿ã¹ã¦ã„ãŸã‚‰ã€OSS ã§bqutil.fnã¨ã„ã† UDF ãŒ GCP ã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ãŸã€‚
ä¾‹ãˆã°å‹ã®ç¢ºèªã®å ´åˆã€ä»¥ä¸‹ã® ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©é–¢æ•°ï¼ˆUDF) ã¯ã©ã® GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å®Ÿè¡Œã—ã¦ã‚‚å®Ÿè¡Œå¯èƒ½
bqutil.fn.typeof() ã“ã®bqutil.fn ã¯bigquery-utils/udfs/community/ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ UDF ãŒbqutil ã¨ã„ã† GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®fn ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«åŒæœŸã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã©ã® GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® Google BigQuery ã‹ã‚‰å®Ÿè¡Œã—ã¦ã‚‚ bqutil.fn.typeof()ã‚’å®Ÿè¡Œå¯èƒ½ã«ã—ã¦ã„ã‚‹ã‚‰ã—ã„ã€‚ é ­è‰¯ã„
This directory contains community contributed user-defined functions to extend BigQuery for more specialized usage patterns. Each UDF within this directory will be automatically synchronized to the bqutil project within the fn dataset for reference in queries."><meta itemprop=name content="OSS ã® Google BigQuery UDF `bqutil.fn` ã‚’ä½¿ãˆã° UDF ã®ç‹¬è‡ªå®Ÿè£…ã‚’ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„"><meta itemprop=description content="TL;DR; UDF ã‚’ç‹¬è‡ªå®Ÿè£…ã™ã‚‹å‰ã«ã€bqutil.fnã‚’çœºã‚ã¦ãŠãã¨è»Šè¼ªã®å†ç™ºæ˜ãŒå›é¿ã§ãã‚‹ã‹ã‚‚
èƒŒæ™¯ SQL ã¯ã€ç‰¹å®šã®å‡¦ç†ã‚’è¡Œã†éš›ã«ãƒ‡ãƒ¼ã‚¿ã®å‹ãŒåŒä¸€ã§ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ãŒã€ã‚‚ã¨ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ç´¹ä»‹ã™ã‚‹ã‚ˆã‚Šã‚‚ã‚‚ã£ã¨ãŠæ‰‹è»½ã«ã‚«ãƒ©ãƒ ã®å‹ã‚’ç¢ºèªã—ãŸã„ã¨ããŒã‚ã‚Šã¾ã›ã‚“ã‹?
ä¾‹ãˆã°ã€å‡ºåŠ›çµæœã‚’è¦‹ãŸã ã‘ã§ã¯ã€12345 ãŒ STRING ãªã®ã‹ INT64 ãªã®ã‹åˆ¤åˆ¥ä¸å¯èƒ½ã§ã™ã‚ˆã­ã€‚(ã‚‚ã—åˆ¤åˆ¥å¯èƒ½ãªæ–¹æ³•çŸ¥ã£ã¦ã„ã‚‹äººã„ãŸã‚‰æ•™ãˆã¦ä¸‹ã•ã„&mldr;)
GCP ã«ã‚ˆã‚‹ OSS UDF ã® bqutil.fn ãªã®ã§ãŠæ‰‹è»½ã« BigQuery ã®çµæœã®å‹ã‚’ç¢ºèªã—ãŸã„æ™‚ã«ãªã«ã‹è‰¯ã„æ–¹æ³•ãŒãªã„ã‹ãªã¨èª¿ã¹ã¦ã„ãŸã‚‰ã€OSS ã§bqutil.fnã¨ã„ã† UDF ãŒ GCP ã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ãŸã€‚
ä¾‹ãˆã°å‹ã®ç¢ºèªã®å ´åˆã€ä»¥ä¸‹ã® ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©é–¢æ•°ï¼ˆUDF) ã¯ã©ã® GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å®Ÿè¡Œã—ã¦ã‚‚å®Ÿè¡Œå¯èƒ½
bqutil.fn.typeof() ã“ã®bqutil.fn ã¯bigquery-utils/udfs/community/ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ UDF ãŒbqutil ã¨ã„ã† GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®fn ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«åŒæœŸã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã©ã® GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® Google BigQuery ã‹ã‚‰å®Ÿè¡Œã—ã¦ã‚‚ bqutil.fn.typeof()ã‚’å®Ÿè¡Œå¯èƒ½ã«ã—ã¦ã„ã‚‹ã‚‰ã—ã„ã€‚ é ­è‰¯ã„
This directory contains community contributed user-defined functions to extend BigQuery for more specialized usage patterns. Each UDF within this directory will be automatically synchronized to the bqutil project within the fn dataset for reference in queries."><meta itemprop=datePublished content="2022-01-20T00:03:07+09:00"><meta itemprop=dateModified content="2022-01-20T00:03:07+09:00"><meta itemprop=wordCount content="146"><meta itemprop=image content="https://shunyaueta.com/ogp.jpg"><meta itemprop=keywords content="bigquery,gcp,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px;overflow-x:auto}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-JMJRQJT0Q3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JMJRQJT0Q3")</script></head><body><header><a href=/ class=title><h2>Shunya Ueta</h2></a><nav><a href=/about/>è‘—è€…ã«ã¤ã„ã¦</a>
<a href=/index.xml>RSS</a></nav></header><main><h1>OSS ã® Google BigQuery UDF `bqutil.fn` ã‚’ä½¿ãˆã° UDF ã®ç‹¬è‡ªå®Ÿè£…ã‚’ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„</h1><p><i><time datetime=2022-01-20 pubdate>2022-01-20</time></i></p><content><h2 id=tldr>TL;DR;</h2><p>UDF ã‚’ç‹¬è‡ªå®Ÿè£…ã™ã‚‹å‰ã«ã€<code>bqutil.fn</code>ã‚’çœºã‚ã¦ãŠãã¨è»Šè¼ªã®å†ç™ºæ˜ãŒå›é¿ã§ãã‚‹ã‹ã‚‚</p><h2 id=èƒŒæ™¯>èƒŒæ™¯</h2><p>SQL ã¯ã€ç‰¹å®šã®å‡¦ç†ã‚’è¡Œã†éš›ã«ãƒ‡ãƒ¼ã‚¿ã®å‹ãŒåŒä¸€ã§ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ãŒã€ã‚‚ã¨ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ç´¹ä»‹ã™ã‚‹ã‚ˆã‚Šã‚‚ã‚‚ã£ã¨ãŠæ‰‹è»½ã«ã‚«ãƒ©ãƒ ã®å‹ã‚’ç¢ºèªã—ãŸã„ã¨ããŒã‚ã‚Šã¾ã›ã‚“ã‹?</p><p>ä¾‹ãˆã°ã€å‡ºåŠ›çµæœã‚’è¦‹ãŸã ã‘ã§ã¯ã€<code>12345</code> ãŒ STRING ãªã®ã‹ INT64 ãªã®ã‹åˆ¤åˆ¥ä¸å¯èƒ½ã§ã™ã‚ˆã­ã€‚(ã‚‚ã—åˆ¤åˆ¥å¯èƒ½ãªæ–¹æ³•çŸ¥ã£ã¦ã„ã‚‹äººã„ãŸã‚‰æ•™ãˆã¦ä¸‹ã•ã„&mldr;)</p><h2 id=gcp-ã«ã‚ˆã‚‹-oss-udf-ã®-bqutilfn>GCP ã«ã‚ˆã‚‹ OSS UDF ã® bqutil.fn</h2><p>ãªã®ã§ãŠæ‰‹è»½ã« BigQuery ã®çµæœã®å‹ã‚’ç¢ºèªã—ãŸã„æ™‚ã«ãªã«ã‹è‰¯ã„æ–¹æ³•ãŒãªã„ã‹ãªã¨èª¿ã¹ã¦ã„ãŸã‚‰ã€OSS ã§<code>bqutil.fn</code>ã¨ã„ã† UDF ãŒ GCP ã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ãŸã€‚</p><p>ä¾‹ãˆã°å‹ã®ç¢ºèªã®å ´åˆã€ä»¥ä¸‹ã® ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©é–¢æ•°ï¼ˆUDF) ã¯ã©ã® GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å®Ÿè¡Œã—ã¦ã‚‚å®Ÿè¡Œå¯èƒ½</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>bqutil.fn.typeof()
</span></span></code></pre></div><p>ã“ã®<code>bqutil.fn</code> ã¯<a href=https://github.com/GoogleCloudPlatform/bigquery-utils/tree/master/udfs/community#typeofinput-any-type>bigquery-utils/udfs/community/</a>ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ UDF ãŒ<code>bqutil</code> ã¨ã„ã† GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®<code>fn</code> ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«åŒæœŸã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã©ã® GCP ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® Google BigQuery ã‹ã‚‰å®Ÿè¡Œã—ã¦ã‚‚ <code>bqutil.fn.typeof()</code>ã‚’å®Ÿè¡Œå¯èƒ½ã«ã—ã¦ã„ã‚‹ã‚‰ã—ã„ã€‚
é ­è‰¯ã„</p><blockquote><p>This directory contains community contributed user-defined functions to extend BigQuery for more specialized usage patterns. Each UDF within this directory will be automatically synchronized to the bqutil project within the fn dataset for reference in queries.</p></blockquote><p>å®Ÿéš›ã«ä»¥ä¸‹ã®ã‚¯ã‚¨ãƒªã‚’ Google BigQuery ã§å®Ÿè¡Œã™ã‚‹ã¨</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>  bqutil.fn.typeof(<span style=color:#e6db74>&#34;&#34;</span>),
</span></span><span style=display:flex><span>  bqutil.fn.typeof(b<span style=color:#e6db74>&#34;&#34;</span>),
</span></span><span style=display:flex><span>  bqutil.fn.typeof(<span style=color:#ae81ff>1</span>.<span style=color:#ae81ff>0</span>),
</span></span><span style=display:flex><span>  bqutil.fn.typeof(STRUCT()),
</span></span></code></pre></div><pre tabindex=0><code>STRING
BYTES
FLOAT64
STRUCT
</code></pre><p>ã®çµæœãŒå‡ºåŠ›ã•ã‚Œã€å„ã‚«ãƒ©ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã®å‹ã‚’ç¢ºèªã§ãã‚‹ã€‚</p><p><img src=/posts/2022-01-20/images/1.png alt=result></p><p>ä¾¿åˆ©!</p><p>ã“ã‚Œã§ç½®ãæ›ãˆå¯èƒ½ãª UDF ã¯ç½®ãæ›ãˆã‚Œã°ãƒ¡ãƒ³ãƒ†ãƒ³ã‚¹ã—ãªã„ã¨ã„ã‘ãªã„ UDF ãŒå‰Šæ¸›ã•ã‚Œã¦å¬‰ã—ã„ã§ã™ã­</p><p><code>bqutil.fn.typeof()</code> ã® UDF ã®å®Ÿæ…‹ã¨ã—ã¦ã¯
<a href=https://github.com/GoogleCloudPlatform/bigquery-utils/blob/master/udfs/community/typeof.sqlx>bigquery-utils/udfs/community/typeof.sqlx</a>ãŒå‚ç…§ã•ã‚Œã¦å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã€‚</p><p>ä»–ã«ã‚‚</p><ul><li>URL ã® key ã‚’æŠ½å‡ºã§ãã‚‹<a href=https://github.com/GoogleCloudPlatform/bigquery-utils/tree/master/udfs/community#url_keysquery-string>bqutil.fn.url_keys()</a></li><li>ãƒ©ãƒ³ãƒ€ãƒ ãªå€¤ã‚’å‡ºåŠ›ã§ãã‚‹<a href=https://github.com/GoogleCloudPlatform/bigquery-utils/tree/master/udfs/community#random_valuearr-any-type>bqutil.fn.url_keys()</a></li></ul><p>ãªã©ã€è‡ªå‰ã§æ­£è¦è¡¨ç¾ã§é ‘å¼µã£ã¦æ›¸ã„ã¦ã„ã‚‹ã‘ã©å®Ÿéš›ã¯ OSS ã® UDF ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚å¤šã€…ã‚ã‚Šãã†ãªã‹ã‚†ã„ã¨ã“ã‚ã«æ‰‹ãŒå±Šã UDF ãŒå¤šæ•°å…¬é–‹ã•ã‚Œã¦ã„ãŸã€‚</p><p>å¤‰ã‚ã‚Šç¨®ã¨ã—ã¦ã¯ã€
<a href=https://github.com/GoogleCloudPlatform/bigquery-utils/tree/master/udfs/community#statslib-statistical-udfs>StatsLib: Statistical UDFs</a>ã¨ã„ã†çµ±è¨ˆçš„ãªå‡¦ç†ã‚’è¡Œã† UDF ã‚‚å…¬é–‹ã•ã‚Œã¦ã„ãŸã€‚</p><p>ç·šå½¢å›å¸°ã‚„ p å€¤ã®è¨ˆç®—ãŒã§ãã‚‹ UDF ã‚‚å…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€é¢ç™½ã„</p><h2 id=references>References</h2><ul><li><a href=https://stackoverflow.com/questions/43730045/bigquery-type-check-operator-like-typeof-in-javascript-or-workaround>bigquery type check operator? like typeof in Javascript; or workaround</a></li><li><a href=https://github.com/GoogleCloudPlatform/bigquery-utils/tree/master/udfs/community#typeofinput-any-type>typeof(input ANY TYPE)</a></li></ul></content><p><a href=https://shunyaueta.com/tags/bigquery/>#bigquery</a>
<a href=https://shunyaueta.com/tags/gcp/>#gcp</a></p><h2>é–¢é€£ã—ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„è¨˜äº‹</h2><ul><li><a href=/posts/2019-10-03/>é…ã™ãã‚‹ `pandas.read_gbq` ã‚’ä½¿ã‚ãšã«ã€Google BigQueryã‹ã‚‰é«˜é€Ÿã«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€</a></li><li><a href=/posts/2021-11-06/>Standard SQLã®COALESCEã§ã€æ™‚é–“çµŒéã«ã‚ˆã£ã¦ã‚«ãƒ©ãƒ åãŒå¤‰åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æŸ”è»Ÿã«æŠ½å‡ºã™ã‚‹</a></li><li><a href=/posts/2021-11-05/>Dataflow template ã‚’ä½¿ã£ã¦ Google Cloud Pub/Sub ã®ä¸­èº«ã‚’ç°¡å˜ã«ç¢ºèªã™ã‚‹</a></li><li><a href=/posts/2021-10-04/>CloudComposer ã®DAGã‚’CircleCIã§æ›´æ–°ã™ã‚‹</a></li><li><a href=/posts/2021-09-29/>GCPã®Cloud Composer ã®DAGã‚’ç´ æ—©ããƒ»ç°¡å˜ã«ãƒ‡ãƒãƒƒã‚°ã™ã‚‹</a></li></ul>---<br>ã“ã®ã‚µã‚¤ãƒˆã®æ›´æ–°æƒ…å ±ã‚’<a href=/index.xml>RSS</a>ã§é…ä¿¡ã—ã¦ã„ã¾ã™ã€‚ãŠå¥½ããªãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã§è³¼èª­ã—ã¦ã¿ã¦ãã ã•ã„ã€‚<br>ğŸ‘ã“ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®é‹å–¶ã‚’æ”¯æ´ã—ã¦ã„ãŸã ã‘ã‚‹æ–¹ã‚’å‹Ÿé›†ã—ã¦ã„ã¾ã™ã€‚<br>ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ã€<a href=https://www.buymeacoffee.com/hurutoriya>Buy Me a Coffee</a> ã‹ã‚‰ã‚µãƒãƒ¼ãƒˆ(æŠ•ã’éŠ­)ã—ã¦ã„ãŸã ã‘ã‚‹ã¨ã€è‘—è€…ã®æ´»å‹•ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã«ç¹‹ãŒã‚Šã¾ã™âœ¨<br>ğŸ“®ãŠãŸã‚ˆã‚Š<br>è¨˜äº‹ã¸ã®æ„Ÿæƒ³ã®<a href="https://docs.google.com/forms/d/e/1FAIpQLScgZVDrjQiKLbQRovfs88oweCITzjtvt1PlgwL14JfWPOrpPQ/viewform?usp=pp_url&entry.838298670=https%3a%2f%2fshunyaueta.com%2fposts%2f2022-01-20%2f">ãŠãŸã‚ˆã‚Š</a>ã‚’ãŠã¾ã¡ã—ã¦ã¾ã™ã€‚
ãŠæ°—è»½ã«ãŠé€ã‚Šãã ã•ã„ã€‚
ãŠè¿”äº‹ã¯ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ãŒã‚ã‚Œã°ãƒ¡ãƒ¼ãƒ«ã§ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚
ã‚‚ã¡ã‚ã‚“ãŠè¿”äº‹ã‚’å¸Œæœ›ã›ãšã«å˜ãªã‚‹æ„Ÿæƒ³ã ã‘ã§ã‚‚å¤§æ­“è¿ã§ã™ã€‚</main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a></footer></body></html>