<!doctype html><html lang=ja><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Elasticsearch 8.8 のリリース内容が盛りだくさんで興味深い | hurutoriya</title><meta name=title content="Elasticsearch 8.8 のリリース内容が盛りだくさんで興味深い"><meta name=description content="表題のとおり、Elasticsearch 8.8 のリリース内容が興味深かったので記事にしておきます。
リリースノートはこちら
Elasticsearch 8.8 introduces out-of-the-box semantic search | Elastic Blog What’s new in 8.8 | Elasticsearch Guide [8.8] | Elastic 個人的に気になったのが、
Elastic Learned Sparse EncodeR (ELSER) をリリース
ELSER は Elastic が独自に開発した、機械学習モデルで、従来はユーザーが検索のために適宜 fine tune したりモデルを自前で用意するなど、気軽にハイブリッド検索を試すことは難しいのが現状だった。 それを解決するために提供されるのが ELSER で、Elastic Cloud のプレミアムを契約していればボタンポチッで利用可能になるらしい。 NOTE: これは Elastic Cloud を使う理由になるので、良い機能開発ですね。素晴らしい。 検索の関連性ベンチマークでも BM25 と比べるとスコアはほぼすべてのデータセットで優位な成果を出している。(この結果を出すの素晴らしいですね) Improving information retrieval in the Elastic Stack: Introducing Elastic Learned Sparse Encoder, our new retrieval model | Elastic Blog 実際問題、自前でモデルを作成して、調整してというのはかなり手間がかかるので、Elastic Cloud さえ契約しておけば、ゼロコストでセマンティック検索を試せるというのはかなり魅力的に見えます。しかもモデルの利用に当たってライセンスの心配が不要。これ重要ですね。 詳細はこちらの記事にかかれています。Introducing Elastic Learned Sparse Encoder: Elastic’s AI model for semantic search | Elastic Blog Elasticsearch のベクトル検索の最大次元数が 2048 次元に!"><meta name=keywords content="search,elasticsearch,machinelearning,"><meta property="og:title" content="Elasticsearch 8.8 のリリース内容が盛りだくさんで興味深い"><meta property="og:description" content="表題のとおり、Elasticsearch 8.8 のリリース内容が興味深かったので記事にしておきます。
リリースノートはこちら
Elasticsearch 8.8 introduces out-of-the-box semantic search | Elastic Blog What’s new in 8.8 | Elasticsearch Guide [8.8] | Elastic 個人的に気になったのが、
Elastic Learned Sparse EncodeR (ELSER) をリリース
ELSER は Elastic が独自に開発した、機械学習モデルで、従来はユーザーが検索のために適宜 fine tune したりモデルを自前で用意するなど、気軽にハイブリッド検索を試すことは難しいのが現状だった。 それを解決するために提供されるのが ELSER で、Elastic Cloud のプレミアムを契約していればボタンポチッで利用可能になるらしい。 NOTE: これは Elastic Cloud を使う理由になるので、良い機能開発ですね。素晴らしい。 検索の関連性ベンチマークでも BM25 と比べるとスコアはほぼすべてのデータセットで優位な成果を出している。(この結果を出すの素晴らしいですね) Improving information retrieval in the Elastic Stack: Introducing Elastic Learned Sparse Encoder, our new retrieval model | Elastic Blog 実際問題、自前でモデルを作成して、調整してというのはかなり手間がかかるので、Elastic Cloud さえ契約しておけば、ゼロコストでセマンティック検索を試せるというのはかなり魅力的に見えます。しかもモデルの利用に当たってライセンスの心配が不要。これ重要ですね。 詳細はこちらの記事にかかれています。Introducing Elastic Learned Sparse Encoder: Elastic’s AI model for semantic search | Elastic Blog Elasticsearch のベクトル検索の最大次元数が 2048 次元に!"><meta property="og:type" content="article"><meta property="og:url" content="https://shunyaueta.com/posts/2023-06-02-2323/"><meta property="og:image" content="https://shunyaueta.com/ogp.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-02T23:23:58+09:00"><meta property="article:modified_time" content="2023-06-02T23:23:58+09:00"><meta property="og:site_name" content="hurutoriya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shunyaueta.com/ogp.jpg"><meta name=twitter:title content="Elasticsearch 8.8 のリリース内容が盛りだくさんで興味深い"><meta name=twitter:description content="表題のとおり、Elasticsearch 8.8 のリリース内容が興味深かったので記事にしておきます。
リリースノートはこちら
Elasticsearch 8.8 introduces out-of-the-box semantic search | Elastic Blog What’s new in 8.8 | Elasticsearch Guide [8.8] | Elastic 個人的に気になったのが、
Elastic Learned Sparse EncodeR (ELSER) をリリース
ELSER は Elastic が独自に開発した、機械学習モデルで、従来はユーザーが検索のために適宜 fine tune したりモデルを自前で用意するなど、気軽にハイブリッド検索を試すことは難しいのが現状だった。 それを解決するために提供されるのが ELSER で、Elastic Cloud のプレミアムを契約していればボタンポチッで利用可能になるらしい。 NOTE: これは Elastic Cloud を使う理由になるので、良い機能開発ですね。素晴らしい。 検索の関連性ベンチマークでも BM25 と比べるとスコアはほぼすべてのデータセットで優位な成果を出している。(この結果を出すの素晴らしいですね) Improving information retrieval in the Elastic Stack: Introducing Elastic Learned Sparse Encoder, our new retrieval model | Elastic Blog 実際問題、自前でモデルを作成して、調整してというのはかなり手間がかかるので、Elastic Cloud さえ契約しておけば、ゼロコストでセマンティック検索を試せるというのはかなり魅力的に見えます。しかもモデルの利用に当たってライセンスの心配が不要。これ重要ですね。 詳細はこちらの記事にかかれています。Introducing Elastic Learned Sparse Encoder: Elastic’s AI model for semantic search | Elastic Blog Elasticsearch のベクトル検索の最大次元数が 2048 次元に!"><meta itemprop=name content="Elasticsearch 8.8 のリリース内容が盛りだくさんで興味深い"><meta itemprop=description content="表題のとおり、Elasticsearch 8.8 のリリース内容が興味深かったので記事にしておきます。
リリースノートはこちら
Elasticsearch 8.8 introduces out-of-the-box semantic search | Elastic Blog What’s new in 8.8 | Elasticsearch Guide [8.8] | Elastic 個人的に気になったのが、
Elastic Learned Sparse EncodeR (ELSER) をリリース
ELSER は Elastic が独自に開発した、機械学習モデルで、従来はユーザーが検索のために適宜 fine tune したりモデルを自前で用意するなど、気軽にハイブリッド検索を試すことは難しいのが現状だった。 それを解決するために提供されるのが ELSER で、Elastic Cloud のプレミアムを契約していればボタンポチッで利用可能になるらしい。 NOTE: これは Elastic Cloud を使う理由になるので、良い機能開発ですね。素晴らしい。 検索の関連性ベンチマークでも BM25 と比べるとスコアはほぼすべてのデータセットで優位な成果を出している。(この結果を出すの素晴らしいですね) Improving information retrieval in the Elastic Stack: Introducing Elastic Learned Sparse Encoder, our new retrieval model | Elastic Blog 実際問題、自前でモデルを作成して、調整してというのはかなり手間がかかるので、Elastic Cloud さえ契約しておけば、ゼロコストでセマンティック検索を試せるというのはかなり魅力的に見えます。しかもモデルの利用に当たってライセンスの心配が不要。これ重要ですね。 詳細はこちらの記事にかかれています。Introducing Elastic Learned Sparse Encoder: Elastic’s AI model for semantic search | Elastic Blog Elasticsearch のベクトル検索の最大次元数が 2048 次元に!"><meta itemprop=datePublished content="2023-06-02T23:23:58+09:00"><meta itemprop=dateModified content="2023-06-02T23:23:58+09:00"><meta itemprop=wordCount content="193"><meta itemprop=image content="https://shunyaueta.com/ogp.jpg"><meta itemprop=keywords content="search,elasticsearch,machinelearning,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px;overflow-x:auto}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-JMJRQJT0Q3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JMJRQJT0Q3")</script></head><body><header><a href=/ class=title><h2>hurutoriya</h2></a><nav><a href=/index.xml>RSS</a>
<a href=/about/>著者について</a></nav></header><main><h1>Elasticsearch 8.8 のリリース内容が盛りだくさんで興味深い</h1><p><i><time datetime=2023-06-02 pubdate>2023-06-02</time></i></p><content><p>表題のとおり、Elasticsearch 8.8 のリリース内容が興味深かったので記事にしておきます。</p><p>リリースノートはこちら</p><ul><li><a href=https://www.elastic.co/jp/blog/whats-new-elasticsearch-8-8-0>Elasticsearch 8.8 introduces out-of-the-box semantic search | Elastic Blog</a></li><li><a href=https://www.elastic.co/guide/en/elasticsearch/reference/8.8/release-highlights.html>What’s new in 8.8 | Elasticsearch Guide [8.8] | Elastic</a></li></ul><p>個人的に気になったのが、</p><ul><li><p>Elastic Learned Sparse EncodeR (ELSER) をリリース</p><ul><li>ELSER は Elastic が独自に開発した、機械学習モデルで、従来はユーザーが検索のために適宜 fine tune したりモデルを自前で用意するなど、気軽にハイブリッド検索を試すことは難しいのが現状だった。<ul><li>それを解決するために提供されるのが ELSER で、Elastic Cloud のプレミアムを契約していればボタンポチッで利用可能になるらしい。<ul><li>NOTE: これは Elastic Cloud を使う理由になるので、良い機能開発ですね。素晴らしい。</li></ul></li></ul></li><li>検索の関連性ベンチマークでも BM25 と比べるとスコアはほぼすべてのデータセットで優位な成果を出している。(この結果を出すの素晴らしいですね)
<a href=https://www.elastic.co/jp/blog/may-2023-launch-information-retrieval-elasticsearch-ai-model>Improving information retrieval in the Elastic Stack: Introducing Elastic Learned Sparse Encoder, our new retrieval model | Elastic Blog</a></li><li>実際問題、自前でモデルを作成して、調整してというのはかなり手間がかかるので、Elastic Cloud さえ契約しておけば、ゼロコストでセマンティック検索を試せるというのはかなり魅力的に見えます。しかもモデルの利用に当たってライセンスの心配が不要。これ重要ですね。</li><li>詳細はこちらの記事にかかれています。<a href=https://www.elastic.co/jp/blog/may-2023-launch-sparse-encoder-ai-model>Introducing Elastic Learned Sparse Encoder: Elastic’s AI model for semantic search | Elastic Blog</a></li></ul></li><li><p>Elasticsearch のベクトル検索の最大次元数が 2048 次元に!</p><ul><li><a href=https://github.com/elastic/elasticsearch/pull/95257>Increase max number of vector dims to 2048 by mayya-sharipova · Pull Request #95257 · elastic/elasticsearch</a></li><li>OpenAI API で提供されるベクトルの次元数は 1024 次元以上で、Lucene 側の制約によって扱うことができなかった<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>が、多くの要望によって 2048 次元まで拡張されたとのこと。これは良い意味で Elasticsearch っぽくないというか、かなり意外な動きで驚きました。競合の OpenSearch はすでに OpenAI API を扱えるので、その点をなんとかしたいという意欲が感じ取れて非常に好感触です。</li></ul></li><li><p>Reciprocal Rank Fusion (RRF) <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>という複数のランキングを統合する手法がビルトインで利用可能に</p><ul><li><p>利用用途としては、BM25 のランキングとベクトル検索でのランキングを統合したいときが挙げられる。過去の自分のブログ記事でもハイブリッド検索(BM25 とベクトル検索の融合)<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>を試したが、各ランキングスコアの統合はどうすればいいか正直分からなかったので、こんな手法があるなんて知らなかったので非常に面白い</p></li><li><p><code>NOTE</code> 2023/06/03 追記。@takuya-a さんが教えてくれたがこの RRF も Elastic Cloud のプラチナプラン契約者のみ使える機能らしいです。(元は @johtani さんが、PR の内容を確認して、それを @takuya-a さんに教えてくれたとのこと)
確かに共有してもらった、PR の行を見てみると、<code>License.OperationMode.PLATINUM</code>が引数に使われていました。(OSS とは&mldr;??)
<a href=https://github.com/elastic/elasticsearch/pull/93396/files#diff-f114b9c6a904654185114e728e20cc230425a57054f160bfbfcb63f8dc27b67fR26>https://github.com/elastic/elasticsearch/pull/93396/files#diff-f114b9c6a904654185114e728e20cc230425a57054f160bfbfcb63f8dc27b67fR26</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> LicensedFeature<span style=color:#f92672>.</span><span style=color:#a6e22e>Momentary</span> RANK_RRF_FEATURE <span style=color:#f92672>=</span> LicensedFeature<span style=color:#f92672>.</span><span style=color:#a6e22e>momentary</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>null</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;rank-rrf&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>    License<span style=color:#f92672>.</span><span style=color:#a6e22e>OperationMode</span><span style=color:#f92672>.</span><span style=color:#a6e22e>PLATINUM</span>
</span></span><span style=display:flex><span><span style=color:#f92672>);</span>
</span></span></code></pre></div><p>Elastic Cloud の新機能なのか、OSS の Elasticsearch の新機能なのか不明瞭なのは混乱するので、リリースノートにも明確に記述してほしいところですね。実際今回 @takuya-a さんに教えてもらえるまで完全に誤解していました。
ライセンス縛りするなら、Elasticsearch Stateless みたいに OSS にしないほうがいいじゃないのかなと思いました。でも Open にはしてくれることで、例えば OpenSearch にすぐに移植できる利点とかはありそうです。</p></li></ul></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>前にこの議論について解説記事を書きました。 今でも Lucene のメーリングリストで激論が繰り広げられています。 <a href=/posts/2023-03-26-2208>現在 Lucene の KNN ベクトルの最大次元数は 1024 次元 だが、それを 2048 次元に変更できないかという議論</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://plg.uwaterloo.ca/~gvcormac/cormacksigir09-rrf.pdf>https://plg.uwaterloo.ca/~gvcormac/cormacksigir09-rrf.pdf</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=/posts/2022-10-29-2337>Elasticsearch 8.4 から利用可能な従来の検索機能と近似近傍探索を組み合わせたハイブリッド検索を試す</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></content><p><a href=https://shunyaueta.com/tags/search/>#search</a>
<a href=https://shunyaueta.com/tags/elasticsearch/>#elasticsearch</a>
<a href=https://shunyaueta.com/tags/machinelearning/>#machinelearning</a></p><h2>関連しているかもしれない記事</h2><ul><li><a href=/posts/2022-10-23-2344/>Elasticsearchの近似近傍探索を使って、ドラえもんのひみつ道具検索エンジンを作ってみた</a></li><li><a href=/posts/2022-12-13-2218/>Elasticsearch の Go client で有名な olivere/elastic がES8 以降はサポートしないので、利用者は公式クライアントに移行しよう</a></li><li><a href=/posts/2022-10-29-2337/>Elasticsearch 8.4 から利用可能な従来の検索機能と近似近傍探索を組み合わせたハイブリッド検索を試す</a></li><li><a href=/posts/2022-03-03/>Amazon の製品検索で使われるロバストなキャッシュ手法の論文「ROSE: Robust Caches for Amazon Product Search」</a></li><li><a href=/posts/2021-12-26/>Amazon検索ランキングの奥深さ at MLconf SF 2016</a></li></ul><pre>
---

このサイトの更新情報を<a href=/index.xml>RSS</a>で配信しています。お好きなフィードリーダーで購読してみてください。

👏このウェブサイトの運営を支援していただける方を募集しています。
もしよろしければ、<a href=https://www.buymeacoffee.com/hurutoriya>Buy Me a Coffee</a> からサポート(投げ銭)していただけると、著者の活動のモチベーションに繋がります✨

📮おたより
記事への感想の<a href="https://docs.google.com/forms/d/e/1FAIpQLScgZVDrjQiKLbQRovfs88oweCITzjtvt1PlgwL14JfWPOrpPQ/viewform?usp=pp_url&entry.838298670=https%3a%2f%2fshunyaueta.com%2fposts%2f2023-06-02-2323%2f">おたより</a>をおまちしてます。
お気軽にお送りください。
お返事はメールアドレス入力があればメールでさせていただきます。
もちろんお返事を希望せずに単なる感想だけでも大歓迎です。
</pre></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>