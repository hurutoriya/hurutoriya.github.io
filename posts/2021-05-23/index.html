<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=theme-color content="dark"><title>Poetry ã‹ã‚‰setup.py ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ | Shunya Ueta</title><link rel=stylesheet href=/sass/main.min.1a3290acca8b3fc92df85ea9200859476d6c80d59009c89a749300f3ce7a7a67.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-39994406-11"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-39994406-11');</script></head><body class=dark><nav class=navbar><div class=container><div class=flex><div><a class=brand href=/><span class=emoji>ğŸ°</span>
Shunya Ueta</a></div><div class=flex><a href=/articles/>All posts</a>
<button id=dark-mode-button></button></div></div></div></nav><main><div class=container><article><header class=article-header><div class=thumb><div><h1>Poetry ã‹ã‚‰setup.py ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹</h1><div class=post-meta><div>By Shunya Ueta on <time>2021.05.23</time> (Last updated:<time>2021.05.23</time>)</div><div class=tags><a href=/tags/python/>python</a></div></div></div></div></header></article><div class=article-post><p>ç¾çŠ¶ã® Poetry ã§ã¯ã€<code>pyproject.toml</code> ã‚’åŸºã«ã—ãŸ <code>setup.py</code> ã®ç›´æ¥çš„ãªè‡ªå‹•ç”Ÿæˆã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã€‚</p><p><a href=https://github.com/python-poetry/poetry/issues/761>Support generation of poetry manged setup.py file #761</a></p><p>ãˆï¼Ÿãªã‚“ã§ <code>setup.py</code> ãŒå¿…è¦ãªã‚“ã§ã™ã‹? <code>poetry build</code> ã§ç”Ÿæˆã•ã‚Œã‚‹ <code>source</code> ã¨ <code>wheels</code> ã§äº‹è¶³ã‚Šã‚‹ã‚“ã˜ã‚ƒãªã„ã§ã™ã‹ã¨ã„ã†ãƒ„ãƒƒã‚³ãƒŸãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p><code>PyPI</code> ã‚„ <code>Jflog</code> ãªã©ã§ãƒ›ã‚¹ãƒˆã›ãšã«ã€GitHub ã®ãƒªãƒã‚¸ãƒˆãƒªã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç®¡ç†ã—ãŸã‚Šã€ç‰¹å®šã®ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦æ‰±ã†éš›ã«ã¯ã€æœªã  <code>setup.py</code> ã§ã®ä¾å­˜é–¢ä¿‚ã®è¨˜è¿°ãŒå¿…è¦ã§ã™ã€‚</p><h2 id=poetry-ã«ã‚ˆã‚‹å®Ÿç¾æ–¹æ³•>Poetry ã«ã‚ˆã‚‹å®Ÿç¾æ–¹æ³•</h2><p><a href=https://python-poetry.org/docs/cli/#build>poetry build</a> ã‚³ãƒãƒ³ãƒ‰ã¨ Makefile ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€<code>pyproject.toml</code> ã«å¯¾å¿œã—ãŸ <code>setup.py</code> ã®è‡ªå‹•ç”ŸæˆãŒã§ãã‚‹ã®ã§ãã‚Œã‚’æ¡ç”¨ã—ã¾ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰ã¯GitHub ã®issues ã§ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚ <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Makefile data-lang=Makefile><span class=c># package name
</span><span class=c></span><span class=nv>PACKAGE</span> <span class=o>=</span> lib

<span class=nf>.PHONY</span><span class=o>:</span> <span class=n>build</span>-<span class=n>package</span>
<span class=nf>build-package</span><span class=o>:</span> <span class=c>## Generate setup.py by poetry command for shared package 
</span><span class=c></span>    poetry build
    <span class=c1># source ./dist ã§è§£å‡</span>
    tar zxvf dist/<span class=k>$(</span>PACKAGE<span class=k>)</span>.tar.gz -C ./dist
    <span class=c1># setup.py ã‚’æ‰‹å…ƒã«ã‚³ãƒ”ãƒ¼</span>
    cp dist/<span class=k>$(</span>PACKAGE<span class=k>)</span>/setup.py setup.py
    <span class=c1># poetry build ã§ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã™ã¹ã¦å‰Šé™¤</span>
    rm -rf dist
</code></pre></td></tr></table></div></div><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p><a href=https://github.com/python-poetry/poetry/issues/761#issuecomment-689491920>https://github.com/python-poetry/poetry/issues/761#issuecomment-689491920</a> <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div><h2>See Also</h2><ul><li><a href=/posts/2021-05-19/>KyTeaã‚’Pythonã§æ‰±ãˆã‚‹Mykyteaã‚’ä½¿ã†ãŸã‚ã«å¿…è¦ãªã“ã¨</a></li><li><a href=/posts/2021-03-13/>pipenv ã§ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæ­£å¸¸ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œãªã„ã¨ãã®å¯¾å‡¦æ³•</a></li><li><a href=/posts/2021-02-08/>pip å®Ÿè¡Œæ™‚ã« sys.stderr.write(f"ERROR: {exc} ") ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦pipã‚’å®Ÿè¡Œã§ããªã„ã¨ãã®å¯¾å‡¦æ–¹æ³•</a></li><li><a href=/posts/2020-12-26/>Pythonã§Apache beam å…¥é–€</a></li><li><a href=/posts/2020-09-09/>pandas ã‚’ä½¿ã£ã¦ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã™ã¹ã¦é€£çµã—ã¦ä¸€ã¤ã®CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ</a></li></ul></div><div class=container><nav class="flex container suggested"><a rel=prev href=/posts/2021-05-19/ title="Previous post (older)"><span>Previous</span>
KyTeaã‚’Pythonã§æ‰±ãˆã‚‹Mykyteaã‚’ä½¿ã†ãŸã‚ã«å¿…è¦ãªã“ã¨</a>
<a rel=next href=/posts/2021-05-29/ title="Next post (newer)"><span>Next</span>
2021å¹´05æœˆæ™‚ç‚¹ã§è‡ªåˆ†ãŒå®Ÿè·µã—ã¦ã„ã‚‹MLOpsã®æƒ…å ±åé›†æ–¹æ³•</a></nav></div></main></main><footer class="footer flex"><section class=container><nav class=footer-links><a href=/index.xml>RSS</a></nav></section><script async src=/js/features.min.a94f58a30ad2560de728e080d87f75c60cf806fd1b3d5f4815f1a1a02c0d1859.js></script></footer></body></html>