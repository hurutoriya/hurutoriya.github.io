<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Shunya Ueta</title><meta name=description content="Shunya Ueta's blog"><meta name=author content="Shunya Ueta"><link rel=canonical href=https://shunyaueta.com/><link crossorigin=anonymous href=/assets/css/stylesheet.min.e21185e6c4b43ff34c81666f70aa4f80140274057866888c0a5c28addc9b7fd2.css integrity="sha256-4hGF5sS0P/NMgWZvcKpPgBQCdAV4ZoiMClwordybf9I=" rel="preload stylesheet" as=style><link rel=icon href=https://shunyaueta.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://shunyaueta.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://shunyaueta.com/favicon-32x32.png><link rel=apple-touch-icon href=https://shunyaueta.com/apple-touch-icon.png><link rel=mask-icon href=https://shunyaueta.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.67.1"><link rel=alternate type=application/rss+xml href=https://shunyaueta.com/index.xml><link rel=alternate type=application/json href=https://shunyaueta.com/index.json><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: rgb(29, 30, 32);--entry: rgb(46, 46, 51);--primary: rgb(218, 218, 219);--secondary: rgb(155, 156, 157);--tertiary: rgb(65, 66, 68);--content: rgb(196, 196, 197);--hljs-bg: rgb(46, 46, 51);--code-bg: rgb(55, 56, 62);--border: rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-39994406-11','auto');ga('send','pageview');}</script><meta property="og:title" content><meta property="og:description" content="Shunya Ueta's blog"><meta property="og:type" content="website"><meta property="og:url" content="https://shunyaueta.com/"><meta property="og:image" content="https://shunyaueta.com/ogp.jpg"><meta property="og:site_name" content="Shunya Ueta"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shunyaueta.com/ogp.jpg"><meta name=twitter:title content><meta name=twitter:description content="Shunya Ueta's blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Shunya Ueta","url":"https://shunyaueta.com/","description":"Shunya Ueta\u0026#39;s blog","thumbnailUrl":"https://shunyaueta.com/favicon.ico","sameAs":["https://github.com/hurutoriya","https://twitter.com/hurutoriya","https://www.linkedin.com/in/hurutoriya/","index.xml"]}</script></head><body class=list id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><header class=header><nav class=nav><div class=logo><a href=https://shunyaueta.com/ accesskey=h title="Shunya Ueta (Alt + H)">Shunya Ueta</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://shunyaueta.com/archives title=Archive><span>Archive</span></a></li><li><a href=https://shunyaueta.com/about title=About><span>About</span></a></li><li><a href=https://www.getrevue.co/profile/hurutoriya title=Newsletter><span>Newsletter</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2>[抄訳] 検索エンジンの達成度と検索チームの成熟度モデル</h2></header><section class=entry-content><p>@rilmayer_jpさんのツイート をきっかけに、検索チームの成熟度モデルの存在を知りました。ありがとうございます!
Eric Pugh さんが、検索エンジンに関する会議で公演した内容で、検索チームがどのように成熟していくかをモデル化しており、それが面白かったので備忘録として残しておく
更新 2021/05/13 : 原著者のEric Pugh さんから、抄訳のご快諾いただけました。ありがとうございます 翻訳元資料 Search Relevance Organizational Maturity Model slide Haystack LIVE! 2020 Search Relevance Organizational Maturity Model 検索エンジンのレベル 検索エンジンへの要求をどれだけ満たしているかをピラミッド構造でわかりやすく説明している
検索チームの成熟度モデル 7項目の検索チームの評価項目を考え、3段階で評価を行う
ビジネス 顧客の要求の理解 検索技術 実験駆動 UX コンテンツ強化 データ保有 発展 ステークホルダーがリアルタイムKPIを使用している データ解析から質的なデータを得ている カスタムプラグインを作成している A/Bテスト、オフラインテストをサポートしている 革新的な発見性を提供している(chatbot, 等) NLPやデータサイエンティストの専任チームが取り組んでいる 多種多様な、複雑かつ大規模なデータを扱っている 実践 不定期にレポートを行っている いくつかのユーザーテスト、基礎的な分析を行っている 関連性のための複雑な設定、プラグインの使用をしている 実験は適用可能だが、A/Bテストなどはできない 発見しやすくするためのUIを提供している 分類学や概念体型の適用をしている データの複雑度の監視している 基礎 ビジネスインパクトが測定されていない クエリログは存在しない、またはユーザーテストを行っていない 技術スタックを適度に調整している 検索のテストは手作業で行い、デプロイは低頻度 1ページに10個の検索結果がある 僅かな取り組み(シノニムなど) とても単純なデータモデル 感想 ひと目で...</p></section><footer class=entry-footer><span title="2021-05-12 22:33:23 +0900 +0900">May 12, 2021</span>&nbsp;·&nbsp;Shunya Ueta</footer><a class=entry-link aria-label="post link to [抄訳] 検索エンジンの達成度と検索チームの成熟度モデル" href=https://shunyaueta.com/posts/2021-05-12/></a></article><article class=post-entry><header class=entry-header><h2>Pythonで、変数を挿入して柔軟にSQLクエリを構築する</h2></header><section class=entry-content><p>データ処理のタスクをこなしていると、PythonでSQLに変数を挿入し柔軟にSQLクエリを構築したくなる。 例えば、
中間テーブルを作るためにAirFlowなどで定期的なジョブを実行し、SQLの createdの時間を当日のものに変更する training, dev, test でデータを分割する際に、createdの条件を変更して3パターンのデータを取得する などが考えられる。
変数をSQLに組み込んで実行したい際には、kayak/pypikaのような SQL builder もあるが、個人的に可読性が悪くなったり、SQLクエリの作成のためだけに余計なパッケージをいれたくない。そのためパッケージを入れずにシンプルに完結する方法をここでは紹介する。
編集履歴 2021/05/12: twitter でdocstring ではなくstring literal ですよという指摘をいただき修正 ref 2021/05/12: twitter での意見を反映 1. 単なる文字列としてSQLクエリを構築 1 2 3 def get_guery(num: int, category: str): sql=f"SELECT field1, field2, field3, field4 FROM TABLE WHERE condition1={num} AND condition2={category}" return sql f-string で文字列に変数を挿入して、SQLクエリを構築 だが、
SQLが長くなるとPEP8に準拠せず、E501 line too longに抵触する 視認性が低く、SQLクエリの実行内容を理解しづらい 2. 複数行文字列としてSQLクエリを構築 1 2 3 4 5 6 7 8 def get_guery(num: int, category: str): sql = f""" SELECT field1, field2, field3, field4 FROM table WHERE condition1={num} AND condition2={category} """ return sql 1番目と比較すると、複数行を扱えるstring literal-longstringを採用することで、SQLクエリが複数行になることでで見やすい (@cocu_tan さん、ご指摘ありがとうございます!...</p></section><footer class=entry-footer><span title="2021-04-29 22:52:25 +0900 +0900">April 29, 2021</span>&nbsp;·&nbsp;Shunya Ueta</footer><a class=entry-link aria-label="post link to Pythonで、変数を挿入して柔軟にSQLクエリを構築する" href=https://shunyaueta.com/posts/2021-04-29/></a></article><article class=post-entry><header class=entry-header><h2>機械学習エンジニアから検索エンジニアに転生</h2></header><section class=entry-content><p>2018 年 2 月に株式会社メルカリに機械学習エンジニアとして入社したが、来月から同社で検索エンジニアに転向する。
機械学習エンジニアとして 入社してからは主に、機械学習により同社での Cusotmer Service 分野の業務効率化を推進してきた。 この３年間で、実応用を前提にした機械学習プロジェクトの1→100と０→１の両者を体験できたのは得難い経験だった。
主に 2 つのプロジェクトを取り組んできたが、そのうちの一つである「機械学習による商品監視プロジェクト」の成果を論文として公開 できたのは、自分としても嬉しい。
この領域はTrust and Safaty とよばれており、少し聞き慣れない言葉かもしれないが、サービスを提供するにあたって必須となるサービスの信頼と安全性を高めることを指す。 少し前に Pinterest がこの領域でのカンファレンスを開催していて、この領域での機械学習の需要がなくなることは無いだろうなと改めて確信を得た。
Trust & Safety Machine Learning Summit なぜ検索エンジニア? キャリアで新しいことに挑戦したい時、鶏と卵問題は必ず発生すると思っている。 例えば機械学習エンジニアが募集されているが、実務経験を重視されるので未経験だとそもそもポジションに就くことができない。
データとエンジニアリングの重なる領域でもう一段スキルと経験を深めたいなと検討した領域が検索領域だったが、一般的な募集では検索領域での経験 N 年以上を求むというものが多く、未経験での転職の壁はなかなかに厳しい。 なら内部での異動はどうだろうと去年の年末に希望を出してみたところ、まずは実験的にチーム異動してみようという話になった。 2 月の半ばから 1 ヶ月程度検証期間を経て問題なしということで、ひとまず正式に検索チームに異動できることになった。
身内贔屓というわけではないが、世界的に見ても同社の検索チームは領域的にもチームとしても凄くエキサイティングだと思っている。 まさに情熱プログラマーでも提唱されている、一番の下手くそでいようが実践できるので凄くワクワクしている。
一番の下手くそでいよう by 情熱プログラマー ソフトウェア開発者の幸せな生き方
扱う技術スタックなどは変わりますが、僕の中では根本的にデータとエンジニアリングにどっぷり浸かる点では機械学習エンジニアだろうと検索エンジニアだろうと変わりはしないので、着実に経験を積んでいきたいなと思っています。
直近の目標としては 2 年以内に、検索領域で自分の興味とマッチする査読付き国際会議
KDD CHIIR SIGIR ecom ECNLP OpML MLSys に採択されるような、Novel な(今までにない)成果を出したい</p></section><footer class=entry-footer><span title="2021-03-27 23:54:15 +0900 +0900">March 27, 2021</span>&nbsp;·&nbsp;Shunya Ueta</footer><a class=entry-link aria-label="post link to 機械学習エンジニアから検索エンジニアに転生" href=https://shunyaueta.com/posts/2021-03-27/></a></article><article class=post-entry><header class=entry-header><h2>pipenv でローカルパッケージが正常にインストールされないときの対処法</h2></header><section class=entry-content><p>TL; DR; pip install pipenv==2018.11.26 をすれば直った!!!!! 実行環境 1 2 $pipenv --version pipenv, version 2020.11.15 直面した問題 1 2 3 4 5 ./app/ ├── model │ └── setup.py └── serving └── Pipfile のような構成で、modelというローカルパッケージを作成しており、serving 直下の Pipfile は、model を読み込んで setup.py に記述されている依存パッケージもインストールするようにしたい。
serving ディレクトリで、以下のコマンドを入力すればローカルパッケージが pipenv によりインストールされるはずだが
1 pipenv install --editable ../model 依存関係をすべて記述するはずの Pipenv.lock には、modelのパスのみが記述され、ローカルパッケージが要求する依存パッケージが記述されていない。
原因を探してみたところ、
Installing a local package with pipenv install ‘-e .’ doesn’t save dependencies #1024...</p></section><footer class=entry-footer><span title="2021-03-13 21:43:44 +0900 +0900">March 13, 2021</span>&nbsp;·&nbsp;Shunya Ueta</footer><a class=entry-link aria-label="post link to pipenv でローカルパッケージが正常にインストールされないときの対処法" href=https://shunyaueta.com/posts/2021-03-13/></a></article><article class=post-entry><header class=entry-header><h2>2021年の目標</h2></header><section class=entry-content><p>ちょっと遅れましたが、最近これからどうするかについて色々と考えていて、その過程で 2021 年をどう過ごすかが決まったのでメモ。
3 つの目標 Senior Software Engineer として確固たる実力を身につけることに集中 英語にふれることを習慣化 SNS を断ち自分にとって後悔の無い時間を歩む Senior Software Engineer として確固たる実力を身につけることに集中 まず Senior Software Engineer と自分で胸を張って宣言できる実力を身につける。
最近は自分のキャリアを専門性を深堀りしていくとして、Software Engineer としての道を進んでいくことを決めた。
上記の理由として自分は Data Scientist になれるほど専門性は無いと思っている。Ph.D は持っていないし、再び博士課程に行くとしても研究は辛い。また Machine Learning Engineer や Data Scientist に特化していっても将来 30 年間働いていく中でそれらのレッドオーシャンで自分が生き抜いていけるとは思えない。 Software Engineer という職に飽きるまでは Product Manager のキャリアも考えなくていいと思った。その葛藤を同僚の人にも相談したが、輝かしい経歴(アメリカの有名大学で CS 専攻 →SWE→PM と天上人)の人でも、手を動かせなくなることに焦りを感じるよとおっしゃられていて非常に共感した。
何よりも今の会社に入社して 3 年間働いてきた経験で身に染みたのは、Software Engineer という職業が楽しいなと思えた。もちろんデータ分析や機械学習などにも楽しさがあるが、それらを最大限レバレッジをきかせるためには Software Enginner としてのスキルが必須であり、最終的に物事を実現するためも避けて通れないと考えている。
2020/03 からは新しいキャリアを見据えて少し方向転換をしてみることした。機械学習やデータ分析領域からは離れないが、チームが変わって扱う領域も異なるので非常に楽しみだ。弱くてニューゲームを楽しもう
英語にふれることを習慣化 最近親しい人と雑談する際に言葉に出すようにしているんですが、国外で働くことに憧れを持っています。業務でも英語を使ったコミュニケーションはムラがあるが 4-7 割ほどになっている。今の段階はコミュニケーションはできるが、細かいミスや相手にネイティブレベルのスピードで喋られると脳みそがストップして働くのをやめてしまうのでなんとかしたい。社内の語学学習強化トレーナーの人に相談したところ、やはり毎日時間を積み重ねていくしかないと言われたので、今の気合でしゃべる英会話から自分でも自信を持てる英語の力を持っていきたいなと思っている。
SNS を断ち自分にとって後悔の無い時間を歩む これは自戒なのですが、何気なくボーッとして SNS を見たりする時間が多く、学生の頃にあったひたむきに何かを学び積み重ねていくという習慣が消え去ってます。やばい。集中力も継続できないしで焦燥感だけが高まり行動ができていないという悪循環です。
人生を楽しむためにも、貴重な時間を自分自身に自信を持って過ごせるように後悔のない時間を歩んでいきたい。...</p></section><footer class=entry-footer><span title="2021-03-05 20:42:15 +0900 +0900">March 5, 2021</span>&nbsp;·&nbsp;Shunya Ueta</footer><a class=entry-link aria-label="post link to 2021年の目標" href=https://shunyaueta.com/posts/2021-03-05/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://shunyaueta.com/page/7/>« 前のページ</a>
<a class=next href=https://shunyaueta.com/page/9/>次のページ »</a></nav></footer></main><footer class=footer><span>&copy; 2022 <a href=https://shunyaueta.com/>Shunya Ueta</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z" /></svg></a><script>let menu=document.getElementById('menu')
if(menu){menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>